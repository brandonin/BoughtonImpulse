(function(t){t.execute(function(){t.when("A","jQuery","dp-js-logger","dp-ajax-prefetch-metrics").register("dp-ajax-prefetch",function(n,k,b,a){function d(b,d,e,f,l,m){this.scope=b;this.uniqueId=d;this.url=e;this.options=f;this.context=l;this.status=o;this.selected=!1;this.error=this.successData=this.xhr=this._status=void 0;this.chunks=[];this.doNotAbort=m||!1;this.prefetchMetrics=a.getInstance(this.scope)}var o=0,i=new b("dpAjaxPrefetch");d.prototype._callback=function(a,b,e,f,l){typeof a==="function"&&
a.call(self,b,e,f,l)};d.prototype._canAbort=function(){return!this.doNotAbort&&this.status===1};d.prototype._isAborted=function(){return this.status===3};d.prototype._getUniqueId=function(){return this.uniqueId};d.prototype._abort=function(){if(this.status===1)try{this.ajaxRequestRefence.abort(),this.status=3}catch(a){i.logFatal(a,{message:" Could not abort ajax request."})}};d.prototype._flushChunkData=function(){var a=this;a.chunks.length&&k.map(a.chunks,function(b){a._callback(a.options.chunk,
b,a.context)})};d.prototype._request=function(){var a=this;a.ajaxRequestRefence=n.get(a.url,{params:a.options.params,success:function(b,e,f){a.status=4;a.successData=b;a._status=e;a.xhr=f;a.selected&&a._callback(a.options.success,b,e,f,a.context)},error:function(b,e,f){a.status=2;a.xhr=b;a._status=e;a.error=f;a.selected&&a._callback(a.options.error,b,e,f,a.context)},abort:function(b){a.status=3;a.xhr=b;a.selected&&a._callback(a.options.abort,b,a.context)},chunk:function(b){b&&(a.chunks.push(b),a.selected&&
a._callback(a.options.chunk,b,a.context))},timeout:a.options.timeout||4E4})};d.prototype.prefetchContent=function(){this.prefetchMetrics.predicted(this.uniqueId);if(this.status===o)this.status=1,this._request()};d.prototype.getContent=function(a){a&&this.prefetchMetrics.selected(this.uniqueId);d._abortPrefetchesExcept(this);this.selected=!0;this.status===o?(this.status=1,this._request()):this.status===1?this._flushChunkData():this.status===4&&(this._flushChunkData(),this._callback(this.options.success,
this.successData,this._status,this.xhr,this.context),n.trigger("a:pageUpdate"))};d._objects={};d._abortPrefetchesExcept=function(a){k.each(d._objects[a.scope],function(b,e){e._canAbort()&&b!==a._getUniqueId()&&e._abort()})};d.getInstance=function(a,b,e,f,l,m){if(!a||!b||!e||typeof f!=="object")throw"Incorrect parameter passed.";d._objects[a]=d._objects[a]||{};var h=d._objects[a][b];h&&h._isAborted()&&(delete d._objects[a][b],h=void 0);h||(d._objects[a][b]=new d(a,b,e,f,l,m,this));return d._objects[a][b]};
return d});t.register("dp-js-logger",function(){return function(n){function k(a,b,o){b=b||{};typeof a==="string"&&(b.message+=a,a=void 0);b.logLevel=o;window.ueLogError&&window.ueLogError(a,b)}var b=this;b.attribution=n||"Twister";b.logFatal=function(a,b){k(a,b,"FATAL")};b.logError=function(a,b){k(a,b,"ERROR")};b.logCounter=function(a,d){window.ue&&window.ue.count&&ue.count(b.attribution+a,d)};b.consoleLog=function(a){window.console&&typeof Twister!=="undefined"&&Twister.printConsoleLogs&&console.log(a)}}});
t.when("A","jQuery","dp-ajax-prefetch","twister-utils").register("dimensional-summary-module",function(n,k,b,a){return function(b){function o(a){if(e.initData.fnToDetermineSelectedVariations){if(typeof e.initData.fnToDetermineSelectedVariations==="function")e.currentDimCombOnGlance=e.initData.fnToDetermineSelectedVariations.call(e)}else e.glanceViewSelectedDims=DetailPage.StateController.getState().selected_variations,e.currentDimCombOnGlance=DetailPage.StateController.getState().currentDimCombID;
return a?e.currentDimCombOnGlance.split("_"):e.currentDimCombOnGlance}function i(b,e){for(var h="",g,d,q=0,c=b.length;q<c;q++)h=h+(q>0?",":"")+b[q];(q=n.state("twisterjsDpxData"))&&(d=f.param(q));d===void 0&&(d=a.getQueryParams({psc:1}),d=f.extend(d,{parentAsin:DetailPage.StateController.getState().parent_asin}),d=f.map(d,function(c,a){return a+"="+c}).join("&"));h&&(g="/gp/twister/dimension?asinList="+h+"&isDimensionSlotsAjax=1&dimSubType="+e.dimSubType+"&dimType="+(Twister.multiDimensionWeblabEnabled?
"Dropdown":e.dimType)+(d?"&"+d:""));return g}function q(a){for(var b,e=0,g=a.length;e<g;e++)b=b+(e>0?",":"")+a[e];return b}function r(b,m,h){q(b);var b=i(b,h),g={};if(h.params)g.params=h.params;g.chunk=function(a,b){a&&(h.executeChunk===void 0?h.chunk(a,b):h.executeChunk()&&h.chunk(a,b),e.asinDimSumCache[a.ASIN]=a)};g.success=function(b,e,c,g){h.success&&a.typeChecker.isFunction(h.success)&&h.success(b,e,c,g)};g.error=function(b,e,c){h.error&&a.typeChecker.isFunction(h.error)&&h.error(b,e,c)};g.abort=
function(b){h.abort&&a.typeChecker.isFunction(h.abort)&&h.abort(b)};g.timeout=6E4;n.get(b,{success:function(a,b,c){g.success(a,b,c,m)},chunk:function(a){g.chunk(a,m)},error:function(a,b,c){g.error(a,b,c)},abort:function(a){g.abort(a)}})}var e=this,f=n.$;e.initData=b;e.scopePrefix="dpDimSum";e.symbolForTriggeringDim="*";e.uniqueID="";e.urlPrefix="";e.asinDataCache={};e.glanceViewSelectedDims="";e.currentDimCombOnGlance="";e.mapOfDimToAsinMaps={};e.mapOfAsinToDimMaps={};e.asinDimSumCache={};e.scope=
e.scopePrefix+"_"+e.initData.scopeSuffix;e.dimensionsList=e.initData.dimensionsList;e.dimensionValuesList=e.initData.dimensionValuesList;e.dimensionCombinationToASINMap=e.initData.dimensionCombinationToASINMap;o();e.fetchDimSumData=function(b){if(b.dimTriggeringDimSum&&a.typeChecker.isString(b.dimTriggeringDimSum))var m=b.dimTriggeringDimSum;else throw"Wrong parameter passes to DimSumModule "+e.scope;var h=e.dimensionsList.indexOf(m);if(b){if(!b.asinList||!a.typeChecker.isArray(b.asinList))throw"Wrong parameter passed to DimSumModule "+
e.scope;if(!b.chunk||!a.typeChecker.isFunction(b.chunk))throw"Wrong parameter passed to DimSumModule "+e.scope;}else throw error("No options for dimSum");m={dimIndexTriggeringDimSum:h};m.dimCombOnPage=o();var g=o(!0).slice(0);g[h]=e.symbolForTriggeringDim;h=g.join("_");m.hashKey=h;for(var f=b.asinList,h=[],g=[],d=0,c=f.length;d<c;d++){var q=f[d];q&&(!e.asinDimSumCache||!e.asinDimSumCache[q]?h.push(q):g.push(q))}f=[];f.asinListForServer=h;f.asinListForCache=g;f.asinListForServer.length>0&&r(f.asinListForServer,
m,b);if(f.asinListForCache.length>0){h=f.asinListForCache;f=0;for(d=h.length;f<d;f++)g=h[f],b.chunk(e.asinDimSumCache[g],m);h.length===b.asinList.length&&b.success(void 0,void 0,void 0,m)}}}});t.when("A","jQuery").register("detail-page-state-controller",function(){return function(){this.state={};this.getState=function(){return this.state};this.setState=function(n,k){n&&k&&(this.state[n]=k)}}});t.when("A","jQuery").register("detail-page-framework",function(){return{callbacks:{},registerCallback:function(n,
k,b){n!="after_redraw"&&n!="asin_select"||k!="sims-widget"&&k!="session-similarities"&&k!="purchase-similarities"&&k!="buyxgety"||(this.callbacks[k+"_feature_div"]=b)},registerFeature:function(){},registerFeatureConfig:function(){}}});t.when("A","twister-string-constants").register("twister-modal-resize-helper",function(n){return function(){function k(a,i){a.each(function(a,r){var e=d(r);if(r.className.indexOf(i)==-1){if(e.outerWidth()>b.width)b.width=e.outerWidth();if(e.outerHeight()>b.height)b.height=
e.outerHeight()}});return b}var b={width:0,height:0},a=this,d=n.$;a.getGlanceSwatchesInRow=function(a){var a=d("#twister_feature_div "+a),b=0,q=0;if(a.length>0)q=a.get(0).getBoundingClientRect().top,b++;for(var r=1,e=a.length;r<e;r++){var f=a.get(r).getBoundingClientRect();if(Math.abs(q-f.top)>5)break;else b++}return b};a.fixSize=function(b,i,q,r,e){b.removeClass("twisterSwatchWrapper");var f=k(b,r),l=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;if(e!=void 0){var m=
e.twisterModalDiv.outerWidth(),h=a.getGlanceSwatchesInRow(i),g=b.first().width(),g=h*(f.width-g);g>0&&h>0&&(newModalWidth=m+g,e.setModalWidth(newModalWidth))}b.addClass("twisterSwatchWrapper");Twister.isIE8()?(b.each(function(a,b){d(b).css({"min-height":f.height+"px","min-width":f.width+"px"})}),1100<l&&d("."+r).css({height:f.height+"px"})):d("#"+q).html(i+" { min-height:"+f.height+"px; min-width:"+f.width+"px; } ."+r+" { height: "+f.height+"px;}");a.resetBestSize()};a.resetBestSize=function(){b=
{width:0,height:0}}}});t.when("A","jQuery","twisterModule","dp-js-logger","page-refresh:controller","twister-controller","twister-state","twister-string-constants").register("detailPage:RefreshHandler",function(n,k,b,a,d,o,i,q){var r=window.twisterController.twisterModel.twisterState,e=new a("dpPageRegreshHandler"),f={},l=function(a){var b=this;b.clientId=a;b.doPageRefresh=function(g){if(!Array.isArray(g))throw"Incorrect parameters passed to doPageRefresh for clientId "+b.clientId;g=r.getRequestContextForExternalTwisterUpdates(g);
try{d.updatePage(g,q.EVENT_TYPE_CLICK)}catch(f){e.logFatal(f,{message:" Error doing page-refresh for clientId "+a})}};b.getURLParamObject=function(a,e,f){if(!a||f==null)throw"Incorrect parameters passed to getURLParams for clientId "+b.clientId;return{key:encodeURIComponent(a),value:encodeURIComponent(e),isPersistent:f}}};return{getHandlerInstance:function(a){if(a==null||a=="")throw"Incorrect clientID passed to getHandlerInstance of dpRefreshHandler";f[a]||(f[a]=new l(a));return f[a]}}});t.when("A",
"jQuery","detailPage:RefreshHandler","twister-string-constants").register("your-module-name",function(n,k,b){window.handleClickForMyButton=function(){for(var a=[],d="",o="",i=0,q=arguments.length;i<q;i++)o=arguments[i],i==0?d=b.getHandlerInstance(o):(o=d.getURLParamObject(o[0],o[1],o[2]),a.push(o));d.doPageRefresh(a)}});t.when("A","jQuery","dp-ajax-prefetch","detail-page-framework","dp-js-logger","twister-string-constants","page-refresh:meta-cache","page-refresh:page").register("page-refresh:controller",
function(n,k,b,a,d,o,i,q){var r=4E4,e=1,f="dpTwister",l=1,m={intermediateEOS:1,EOS:1},h=1500,g=new d("dpTwister");return new function(){function d(c,a){if(!(a.recordImpressionPending>e)){var b=a.impressionCallbackData&&a.impressionCallbackData.relatedRequestID,f="/gp/twister/impression.html/?relatedRequestID="+b;b?n.delay(function(){n.get(f,{success:function(){g.logCounter("dpTwisterImpression",1)},timeout:r,error:function(){g.logCounter("dpTwisterImpressionFailed",1)}})},h):g.logFatal("prefetchRequestId does not exists. twister prefetch ajax requests are not returning the metadata.");
a.recordImpressionPending++;i.set(c,a)}}function w(c,a,b){if(typeof a.forceFullPrefetch==="undefined")a.forceFullPrefetch=b||o.NO,i.set(c,a);return a.forceFullPrefetch===o.NO&&u.metadata[c.mType]&&!u.metadata[c.mType].fullyPrefetchable}function c(c,a){p(c,function(c){q.executeClientFeatures(c,a)})}function p(c,a){var b=[c];c.relatedContext&&b.push(c.relatedContext);k.each(b,function(c,b){a.apply(u,[b])})}function x(c,a){p(c,function(c){q.fadeInFeatures(c);var e=c.uniqueID,g=c.url;md=i.get(c);if(u.newPrefetchWeblab&&
md.prefetchSent&&w(c,md))e=e+"_prefetch_"+l,g=g+"&prefetchParam="+l,md.hotFeaturesPending=!0;md.requestSent=!0;i.set(c,md);var h=u.newPrefetchWeblab&&a===o.EVENT_TYPE_CLICK;b.getInstance(f,e,g,v,c,c.doNotAbort).getContent(h)})}var u=this;u.metadata={};u.newPrefetchWeblab=!1;u.page=q;var v={chunk:function(c,a){var b=c.ASIN,e=c.Value,g=c.FeatureName;if(!m[g]){var f=i.get(a);g==="twister-request-metadata"?(f.impressionCallbackData=n.parseJSON(e.content[g]),i.set(a,f)):q.refreshFeature(b,g,e)}},success:function(c,
a,e,g){c=i.get(g);if(c.hotFeaturesPending)c.hotFeaturesPending=!1,i.set(g,c),b.getInstance(f,g.uniqueID+"_prefetch_2",g.url+"&prefetchParam=2",v,g,g.doNotAbort).getContent();c.recordImpressionPending&&d(g,c)},error:function(c,a,b){Twister.$("#variations-overlay").hide();Twister.showErrorMessageOnFailure&&(alert(Twister.errorMessageOnFailure),location.reload());g.logFatal(a+" "+b)},abort:function(c){g.logFatal(" Ajax aborted: "+c)},timeout:r};u.prefetchPage=function(c,a){p(c,function(c){var e=c.uniqueID,
g=c.url,h=i.get(c);if(!h.requestSent)w(c,h,a)&&(e=e+"_prefetch_"+l,g=g+"&prefetchParam="+l),h.prefetchSent=!0,h.recordImpressionPending=h.recordImpressionPending||1,h.requestSent=!0,i.set(c,h),b.getInstance(f,e,g,v,c,c.doNotAbort).prefetchContent()})};u.updatePage=function(b,e){if(e===o.EVENT_TYPE_CLICK||e===o.EVENT_TYPE_DROPDOWN_CHANGE){if(!b.partialState){if(a.callbacks["sims-widget_feature_div"])a.callbacks["sims-widget_feature_div"](DetailPage.StateController.getState());q.startMeasurement(b)}x(b,
e)}c(b,e)};u.init=function(c){u.newPrefetchWeblab=c.newPrefetchWeblab;k.each(c.contextMetaData,function(c,a){if(a.elementList){for(var b=a.elementList.length,e=!0,g=0;g<b;g++)if(!a.elementList[g].isPrefetchable){e=!1;break}u.metadata[c]||(u.metadata[c]={});u.metadata[c].fullyPrefetchable=e}});q.init(c)}}});t.when("A","jQuery","page-refresh-measurement","twister-string-constants","dp-js-logger").register("page-refresh:page",function(n,k,b,a,d){var o=new d("dpTwister");return new function(){var d=this;
d.measurement=void 0;d.config={partial:{},full:{},parent:{},master:{}};d.initializeMeasurement=function(a){var r=a.measurement;d.measurement=new b(k,r.atf.marker,r.cf.marker);d.measurement.init(a.storeID,a.productGroupID)};d.init=function(b){d.initializeMeasurement(b);k.each(b.contextMetaData,function(b,e){var f=[],l={},m=e.elementList||[],h=m.length;l[a.EVENT_TYPE_MOUSEOVER]={};l[a.EVENT_TYPE_CLICK]={};for(var g=0;g<h;g++){var q=k("#"+m[g].divToUpdate);f.push("#"+m[g].divToUpdate);q.length&&m[g].customClientFunction&&
(m[g].updateOnHover&&(l[a.EVENT_TYPE_MOUSEOVER][m[g].divToUpdate]=q.attr("customfunctionname")),l[a.EVENT_TYPE_CLICK][m[g].divToUpdate]=q.attr("customfunctionname"))}d.config[b].affectedFeatures=f.join(",");d.config[b].clientFeatures=l})};d.startMeasurement=function(a){this.measurement.start(a.newAsin)};d.fadeInFeatures=function(a){k(this.config[a.mType].affectedFeatures).css({opacity:0.5})};d.executeClientFeatures=function(b,r){k.each(d.config[b.mType].clientFeatures[r===a.EVENT_TYPE_CLICK||r===
a.EVENT_TYPE_DROPDOWN_CHANGE?a.EVENT_TYPE_CLICK:a.EVENT_TYPE_MOUSEOVER],function(a,f){try{eval("var twisterCustomFunction = "+f+";"),twisterCustomFunction(b.reactID,DetailPage.StateController,function(){d.measurement.stampImageLoad(b.newAsin)})}catch(l){o.logFatal(l)}})};d.refreshFeature=function(a,b,e){var f,d;try{b&&e&&e.content&&(d=e.content[b],typeof d!=="undefined"&&(f=k("#"+b),f.html(d),f.css({opacity:""})))}catch(m){b=b||"NoFeatureName",o.logFatal(m,{message:" Error in feature "+b})}this.measurement.stampFeature(b,
a)}}});t.when("twister-string-constants").register("page-refresh:meta-cache",function(n){return{data:{},set:function(k,b){var a=this.getKey(k);return a?this.data[a]=b:void 0},get:function(k){return this.data[this.getKey(k)]||{}},getKey:function(k){var b;k&&k.newAsin&&(b=k.mType===n.MTYPE_PARENT?k.mType+k.newAsin:k.mType===n.MTYPE_MASTER?k.mType+k.id:k.mType+k.newAsin+k.reactID);if(!b)throw"Twister PageRefresh::MetaCache:getKey incorrect context passed.";return b}}});t.when("A","jQuery").register("page-refresh-ajax-scope",
function(){return function(n,k,b){this.scopeName=k;this.url=b;ues("t0",k,window.newTwisterInteractionStartTime);ues("ctb",k,"1");this.signalMarker=function(a){this.markers[a]&&!(this.markers[a].conditions<=0)&&--this.markers[a].conditions===0&&typeof this.markers[a].handler=="function"&&this.markers[a].handler()};this.addlongPoleTag=function(a,b){a=a.toLowerCase();this.markers[a]&&this.markers[a].conditions==0&&this.markers[a].conditions==0&&window.ue&&typeof ue.tag==="function"&&ue.tag(b)};this.postData=
function(){var a=this.scopeName;n.ajax({url:this.url,dataType:"text",timeout:4E4,error:function(){},success:function(b){ues("id",a,b);uex("ld",a)}})};var a=this;this.markers={image:{conditions:1,handler:function(){uet("ne",k);a.signalMarker("af")}},af:{conditions:Twister.atfMarkerCount?Twister.atfMarkerCount:2,handler:function(){uet("af",k);uet("cf",k);a.signalMarker("cf")}},cf:{conditions:Twister.cfMarkerCount?Twister.cfMarkerCount:2,handler:function(){uet("cf",k);a.postData()}}}}});t.when("A","jQuery").register("page-refresh-cache",
function(){return function(){this.data={};this.getValue=function(n,k){return this.data[n]==null?null:k?this.data[n][k]:this.data[n]};this.setValue=function(n,k,b){if(this.data[n]==null||this.data[n].pending)this.data[n]={};this.data[n][k]=b};this.clear=function(n){this.data[n]=null}}});t.when("A","jQuery","page-refresh-refresh","page-refresh-measurement","page-refresh-model","detail-page-framework").register("page-refresh-manager",function(n,k,b,a,d,o){return function(i,q,r,e,f){this.$=i;this.model=
{};this.refresh=new b(i,e,f);this.contextMetaData=q;this.measurement=new a(i,r.atfMarker,r.cfMarker);this.init=function(a,b){for(var e in this.contextMetaData)this.model[e]=new d(i,this.contextMetaData[e].AJAXUrl,this.contextMetaData[e].elementList,e.toString());this.measurement.init(a,b)};this.getModelCacheSize=function(a){var b=0;this.model.hasOwnProperty(a)&&i.each(this.model[a].cache.data,function(a,e){e.hasOwnProperty("cacheStatus")&&(e.cacheStatus==="preFetched"||e.cacheStatus==="completeFetched")&&
b++});return b};this.react=function(a,b){for(var e in this.model)b||this.model[e].finishAjaxCall(this.model[e].currentRequestId,1);e=0;for(var g=a.length;e<g;e++){var f=a[e];b||this.model[f.type].finishAjaxCall(this.model[f.type].currentRequestId,2);this.refresh.startRefresh(this.model[f.type].getUpdateData(this,f));this.model[f.type].makePendingCallBacks()}};this.pageRefreshHandler=function(a,b,e,g){if(!g.noRefresh)for(var f in g.content)try{this.refresh.doRefresh(f,g.content[f]);if(e.isFinishRefreshReq)if(this.refresh.finishRefresh(f),
f=="session-similarities_feature_div"||f=="purchase-similarities_feature_div"||f=="buyxgety_feature_div"){if(o.callbacks[f])o.callbacks[f]()}else f==="zeroes-buy-box_feature_div"&&Twister.isIEBrowser(i)&&i("#"+f).css({opacity:"",zoom:1});this.measurement.stampFeature(b,a)}catch(d){}}}});t.when("A","jQuery","page-refresh-ajax-scope").register("page-refresh-measurement",function(n,k,b){return function(a,d,o){this.atfMarker=d;this.cfMarker=o;this.scopeCount={};this.ajaxScopes={};this.url="";this.init=
function(a,b){this.url="/gp/twister/dynamic-update/ajax-measurement.html/?s="+a+"&pgid="+b+"&deviceType="+Twister.deviceType;Twister.isInstaTwisterEnabled&&(this.url+="&ptd="+Twister.productTypeName)};this.start=function(d){if(window.ue){this.scopeCount[d]||(this.scopeCount[d]=0);var q=d+(this.scopeCount[d]+1);this.scopeCount[d]++;this.ajaxScopes[d]=new b(a,q,this.url)}};this.stampImageLoad=function(a){this.ajaxScopes[a]&&(this.ajaxScopes[a].signalMarker("image"),Twister.cfImageLongPollTag&&this.ajaxScopes[a].addlongPoleTag("cf",
Twister.cfImageLongPollTag))};this.stampFeature=function(a,b){this.ajaxScopes[b]&&(a===this.atfMarker&&this.ajaxScopes[b].signalMarker("af"),a===this.cfMarker&&(this.ajaxScopes[b].signalMarker("cf"),Twister.cfHtmlLongPollTag&&this.ajaxScopes[b].addlongPoleTag("cf",Twister.cfHtmlLongPollTag)))};this.stampCustomMetrics=function(a,b){this.ajaxScopes[b]&&uet(a,this.ajaxScopes[b].scopeName)}}});t.when("A","jQuery","page-refresh-cache").register("page-refresh-model",function(n,k,b){return function(a,d,
o,i){this.$=a;this.pendingCallBacks={};this.pendingCallBacksASIN="";this.cache=new b;this.AJAXUrl=d;this.AJAXRequests={};this.requestIdHash={};this.elementList=o;this.currentRequestId=null;this.pendingCallbacksList={};this.immediateCallbacksList=[];this.elementsToRefresh=[];this.modelType=i;this.getNewRequestId=function(){for(var a=0;a<100;a++){var b=a.toString();if(!this.requestIdHash.hasOwnProperty(b))return this.requestIdHash[b]=!0,b}};this.removeRequestId=function(a){typeof a!="string"&&(a=a.toString());
this.requestIdHash.hasOwnProperty(a)&&delete this.requestIdHash[a]};this.executeActionItems=function(a,b,e,f,d){for(var e=e.divToUpdate,m=0,h=a.length;m<h;m++){var g=a[m];if(g=="addToImmediate")g={},g.id=b,g.key=e,this.immediateCallbacksList.push(g);else if(g=="addToElementsRefresh"||g=="addToElementsRefreshWithLoading")d.push(e+(g=="addToElementsRefreshWithLoading"?",loadingBar":""));else if(g=="updateCache")g={handler:this,callbackType:"updateCache"},this.addToPendingCallbacksList(b,e,g);else if(g==
"customClientFunction"){var g={handler:this,callbackType:"customClientFunction"},o={};o.refreshHandler=f;g.callbackParams=o;this.addToPendingCallbacksList(b,e,g)}else if(g=="doRefreshAndFinish"||g=="doRefresh")g={},g.handler=f,g.callbackType="doRefresh",o={isFinishRefreshReq:1},g.callbackParams=o,this.addToPendingCallbacksList(b,e,g)}};this.getAjaxCallContext=function(a,b,e,f,d,m){var b=[],h=d=0,g="notFetched";this.cache.getValue(a,"cacheStatus")&&(g=this.cache.getValue(a,"cacheStatus"));for(var o=
0,w=this.elementList.length;o<w;o++){var c=this.elementList[o],p=c.divToUpdate,i=[],u=1,v=0,k=0,j=0;c.isPrefetchable=="0"&&(u=0,h=1);c.customClientFunction=="1"&&(v=1,u=0);c.updateOnHover=="1"&&(k=1);c.loadingBar=="1"&&(j=1);if(!m||k){if(e)if(v||!u||this.cache.getValue(a,p))continue;else i.push("updateCache"),d||(d=1);else v?(i.push("customClientFunction"),i.push("addToImmediate")):this.cache.getValue(a,p)?(i.push("doRefresh"),i.push("addToImmediate")):(i.push("updateCache"),i.push("doRefreshAndFinish"),
j?i.push("addToElementsRefreshWithLoading"):i.push("addToElementsRefresh"),d||(d=1));if((e==1&&g=="preFetched"||e==0&&g=="completeFetched"||e==1&&g=="completeFetched")&&d==1)d=0;this.executeActionItems(i,a,c,f,b)}}if((e==1&&g=="preFetched"||e==0&&g=="completeFetched"||e==1&&g=="completeFetched")&&d==1)d=0;m&&d&&(d=0);d&&this.cache.setValue(a,"cacheStatus",e?h?"preFetching":"completeFetching":g=="preFetched"?"hotFeaturesFetching":"completeFetching");a={};a.isAjaxCallReq=d;a.elementsToRefresh=b;return a};
this.getUpdateData=function(a,b){for(var e=b.idList,f=[],d=[],m=[],h=[],g=0,i,w,c,p,o,u=1,v=0,k=e.length;v<k;v++){w=e[v].id;c=e[v].asin;p=e[v].isPrefetch;i=e[v].requiredDivs;i=this.getAjaxCallContext(w,c,p,a,i,e[v].isHover);o=i.elementsToRefresh;for(var j=0,s=o.length;j<s;j++)h.push(o[j]);if(i.isAjaxCallReq){g=1;p=p?1:this.cache.getValue(w,"cacheStatus")=="hotFeaturesFetching"?2:0;if(p==0||p==2)u=0;d.push(w);m.push(c);f.push(p)}}if(g){e={};e.asinList=m.join(",");e.id=d.join(",");e.prefetchParam=f.join(",");
e.managerHandler=a;e.modelType=this.modelType;e.containsOnlyPrefetches=u;try{this.doAjaxCall(e)}catch(n){}}this.elementsToRefresh=h.slice();return h};this.makeCallback=function(a,b,e,f){var d=e.handler,m=e.callbackType,e=e.callbackParams;f==null&&(f=this.cache.getValue(a,b));if(typeof d=="function")d(a,b,e,f);else if(m=="doRefresh")d.pageRefreshHandler(a,b,e,f);else if(m=="customClientFunction")try{d.callCustomClientFunction(a,b,e,f)}catch(h){}else m=="updateCache"&&d.updateCache(a,b,e,f)};this.makePendingCallBacks=
function(a,b,e){var f;if(a){if(typeof this.pendingCallbacksList[a]==="object")if(b){f=this.pendingCallbacksList[a][b];if(!f){f=[];var d={handler:this,callbackType:"updateCache"};f.push(d)}for(var m=0,h=f.length;m<h;m++){d=f[m];try{this.makeCallback(a,b,d,e)}catch(g){}}this.pendingCallbacksList[a][b]&&delete this.pendingCallbacksList[a][b]}else{for(d in this.pendingCallbacksList[a]){f=this.pendingCallbacksList[a][d];m=0;for(h=f.length;m<h;m++)this.makeCallback(a,b,callbackargs,e)}delete this.pendingCallbacksList[a]}}else{a=
0;for(h=this.immediateCallbacksList.length;a<h;a++)b=this.immediateCallbacksList[a],this.makePendingCallBacks(b.id,b.key,null);this.immediateCallbacksList=[]}};this.addToPendingCallbacksList=function(a,b,e){this.pendingCallbacksList.hasOwnProperty(a)||(this.pendingCallbacksList[a]={});this.pendingCallbacksList[a].hasOwnProperty(b)||(this.pendingCallbacksList[a][b]=[]);this.pendingCallbacksList[a][b].push(e)};this.doAjaxCall=function(a){Twister.useVariationsOverlay&&Twister.remainingAjaxCalls===0&&
Twister.$("#variations-overlay").show();Twister.remainingAjaxCalls+=1;var b=this.getNewRequestId();this.currentRequestId=b;var e=a.managerHandler,d=this.AJAXUrl+a.asinList+"&isFlushing=2&id="+a.id+"&prefetchParam="+a.prefetchParam+"&mType="+a.modelType;Twister.isInstaTwisterEnabled&&(d+="&dpEnvironment="+Twister.dpEnvironment);var l={};if(Twister.useAuiAjax){var m=this,d=Twister.A.ajax(d,{method:"get",chunk:function(a){m.AJAXHandler(null,a,AJAXFlushUtils.ajaxReadyState.LOADING)},success:function(){m.AJAXHandler(null,
null,AJAXFlushUtils.ajaxReadyState.DONE);Twister.remainingAjaxCalls-=1;Twister.remainingAjaxCalls===0&&Twister.$("#variations-overlay").hide()},error:function(){Twister.$("#variations-overlay").hide();Twister.remainingAjaxCalls-=1;Twister.showErrorMessageOnFailure&&(alert(Twister.errorMessageOnFailure),location.reload());Twister.printConsoleLogs&&console.logs("ajax call failed")},timeout:4E4});l.streamingXhrRef=d}l.ajaxParams=a;l.managerHandler=e;this.AJAXRequests[b]=l};this.abortAllAjaxCalls=function(){for(requestId in this.requestIdHash)this.finishAjaxCall(requestId,
!0)};this.finishAjaxCall=function(a,b){if(a){var e=this.AJAXRequests[a],d=e.streamingXhrRef,l=e.ajaxParams,e=l.id.split(","),l=l.containsOnlyPrefetches;if(!(b==1&&l)){this.pendingCallbacksList={};this.immediateCallbacksList=[];if(b){d&&typeof d.abort==="function"&&d.abort(AJAXFlushUtils.ajaxHandlerCode.ABORT);d=0;for(l=e.length;d<l;d++)if(this.cache.getValue(e[d])){var m=this.cache.getValue(e[d],"cacheStatus");m=="preFetching"||m=="completeFetching"?b?this.cache.clear(e[d]):this.cache.setValue(e[d],
"cacheStatus",m=="preFetching"?"preFetched":"completeFetched"):m=="hotFeaturesFetching"&&this.cache.setValue(e[d],"cacheStatus",b?"preFetched":"completeFetched")}}this.elementsToRefresh=[];this.removeRequestId(a);delete this.AJAXRequests[a];this.currentRequestId=null}}};this.updateCache=function(a,b,e,d){b=="intermediateEOS"||b=="EOS"?(b=this.cache.getValue(a,"cacheStatus"),b=="preFetching"?this.cache.setValue(a,"cacheStatus","preFetched"):(b=="completeFetching"||b=="hotFeaturesFetching")&&this.cache.setValue(a,
"cacheStatus","completeFetched")):this.cache.setValue(a,b,d)};this.callCustomClientFunction=function(b,d,e){var f=a("#"+d).attr("customFunctionName");if(f){var l=e.refreshHandler,m=DetailPage.StateController.getState().current_asin,h=function(){l.measurement.stampImageLoad(m)},e=Twister.useAui?h:null;if(f=Twister.useAui?eval("var customFunction = "+f+"; customFunction")(b,DetailPage.StateController,e):eval(f)(b,DetailPage.StateController,e)){e={isFinishRefreshReq:0};if(!Twister.useAui){var g;if(d==
"twister-main-image"&&m){g=document.getElementById("main-image");if(!g){var i=document.getElementById("main_image_0");i&&(g=(g=i.getElementsByTagName("img"))?g[0]:null)}if(g)g.onload=h}}l.pageRefreshHandler(b,d,e,f);Twister.useAui||navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&g&&g.complete&&h()}}};this.AJAXHandler=function(a,b,e){if(e==AJAXFlushUtils.ajaxReadyState.DONE)return this.finishAjaxCall(this.currentRequestId,0),AJAXFlushUtils.ajaxHandlerCode.OK;for(a=0;a<1;a++){var d=b,e=d.ASIN,
b=d.Value,d=d.FeatureName;d=="intermediateEOS"||d=="EOS"?this.updateCache(e,d,null,b):this.makePendingCallBacks(e,d,b)}return AJAXFlushUtils.ajaxHandlerCode.OK};this.AJAXErrorHandler=function(a,b,e){(a=a.xhrStatus)||(a=e);return a}}});t.when("A","jQuery").register("page-refresh-refresh",function(){return function(n,k,b){this.$=n;this.loadingBarHtml=k;this.loadingBarHtml2=b;this.doRefresh=function(a,b){n("#"+a).html(b)};this.startRefresh=function(a){if(a)for(var b=0,o=a.length;b<o;b++){var i=a[b].split(","),
k=i[0],r=!0,e=!1;if(k=="buy-box_feature_div"||k=="more-buying-choices_feature_div"||k=="session-similarities_feature_div"&&n.browser.msie)r=!1;i.length>1&&i[1]=="loadingBar"&&(e=!0);r&&!Twister.useVariationsOverlay&&n("#"+k).css("opacity","0.5");e&&this.appendLoadingBar(k)}};this.appendLoadingBar=function(a){var b=n("#"+a);a!="moreBuyingChoices_feature_div"&&!b.attr("loadingBarSet")&&(b.attr("loadingBarSet","1"),a=="more-buying-choices_feature_div"?(b=n("#more-buying-choice-content-div"),b.html(this.loadingBarHtml2)):
(a=b.find("h2, h1, b"),a.length>0&&(a=n(a[0]),a.css({display:"inline",padding:"0px"}),a.after(n(this.loadingBarHtml)))))};this.finishRefresh=function(a){var b=!0,o=!0;a=="buy-box_feature_div"&&(o=b=!1);if(a=="session-similarities_feature_div"&&n.browser.msie||a=="more-buying-choices_feature_div")b=!1;var i="0";a=="more-buying-choices_feature_div"&&(i="1");b&&n("#"+a).css({opacity:"",zoom:i});o&&n("#"+a).removeAttr("loadingBarSet")}}});t.when("A").register("evdd-utils",function(){return function(){this.PopulateEVDD=
function(n,k,b,a){var d={},o,i;for(o in n)i=b[o],typeof i!="undefined"&&(masterDimValIndex=i[0],slaveDimValIndex=i[1],a==masterDimValIndex&&(d[slaveDimValIndex]=n[o]));typeof k.dimensionViewHandlersMap[1].updateViewWithPriceInfo==="function"&&k.dimensionViewHandlersMap[1].updateViewWithPriceInfo(d)}}});t.when("A","jQuery","dp-js-logger").register("dp-ajax-prefetch-metrics",function(n,k,b){function a(a){this.scope="dpPre"+a;this.data={}}new b("PrefetchMetrics");a.prototype._count=function(a,b){var i=
this.scope+a,k;window.ue&&window.ue.count&&(k=typeof b!=="undefined"?(k=ue.count(i,b))||b:(k=ue.count(i))||0);return k};a.prototype._incrementCounter=function(a){this._count(a,(this._count(a)||0)+1)};a.prototype._record=function(a,b,i){this.data[b]=this.data[b]||{};if(!this.data[b][a])this.data[b][a]=i||(new Date).getTime(),a=="predicted"?this._incrementCounter("Predicted"):a=="selected"&&this.data[b].predicted?(a=this.data[b].selected-this.data[b].predicted,this.data[b].lookahead=a,this._incrementCounter("PredictedSelect"),
this._count("LookAhead"+this._count("PredictedSelect"),a),this._count("LookAhead",a)):a=="selected"&&!this.data[b].predicted&&this._incrementCounter("UnpredictedSelect")};a.prototype.setCounter=function(a,b){this._count(a,b)};a.prototype.predicted=function(a,b){this._record("predicted",a,b)};a.prototype.selected=function(a,b){this._record("selected",a,b)};a._allInstances={};a.getInstance=function(b){if(!b)throw"Undefind scope. scope is a required parameter";a._allInstances[b]||(a._allInstances[b]=
new a(b));return a._allInstances[b]};return a});t.when("A").register("scroll-event-handler",function(n){return function(k,b,a){if(b){var d=n.$,o,i=(new Date).getTime();d(b).bind("scroll",function(b){var d=Date.now();o&&d-i<k&&clearTimeout(o);i=d;o=setTimeout(function(){a(b)},k)})}}});t.when("A","twister-utils","twister-string-constants","twister-legacy-popover").register("twister-beaconized-evdd",function(n,k,b){return function(a,d){function o(){var a=8+l(m).height(),a={localContent:h,location:"bottom",
showOnHover:!1,showCloseButton:!1,skin:null,clone:!1,controlCallbacks:!0,locationOffset:[-2,-a],closeEventInclude:"CLICK_OUTSIDE",forceAlignment:!0,group:"DonsBoxDropDowns",width:null};c=l(m).amazonPopoverTrigger(a);l(document).bind("touchend click",function(){c.amznPopoverHide()})}function i(a){a=a.currentTarget.id.split("_");twisterController.handleClick({dimIndex:f.dimOrder,dimValueIndex:a[a.length-1]});return!1}function q(a){l(a.currentTarget).addClass(y)}function r(a){l(a.currentTarget).removeClass(y);
return!1}function e(a){l(a.currentTarget).removeClass(y);i(a);return!1}var f=this,l=n.$,m,h,g,y="evdd-row-hovered",w,c,p={};f.dimType="evdd";f.isMasterDim=!1;f.updateView=function(a){var b=k.getDimStyleData(a.dimCombID,f.dimValuesDisplayData.length,f.dimOrder,f.twisterControllerHandle.twisterAvailabilityCache,f.displayConfigStylesData),e,d,j,h=-1,a=0,h="";c.amznPopoverHide();for(var i=0,o=b.length;i<o;i++)e=b[i],d=p[e.style],j="#"+f.dimName+"_"+i,d==="evdd-row-selected"&&(h=i,h=f.dimValuesDisplayData[h]),
(e.style==="available"||e.style==="selected")&&a++,$rowElement=l(j),$rowElement.removeClass(w).addClass(d),$rowElement.find(".evdd-row-snake-wrapper").show(),$rowElement.find(".evdd-row-price-info-wrapper").html(""),$rowElement.find(".evdd-row-prime-badge-wrapper").html("");b=!1;!f.isMasterDim&&a===1&&(b=!0);a=b;l(m).find("button").text(h);l(g).text(h);a?(l(m).addClass("evdd-hidden"),l(g).removeClass("evdd-hidden")):(l(g).addClass("evdd-hidden"),l(m).removeClass("evdd-hidden"))};f.updateViewWithPriceInfo=
function(a){var b,c,e;for(b in a)c=a[b],e="#"+f.dimName+"_"+b,e=l(e),e.find(".evdd-row-snake-wrapper").hide(),e.find(".evdd-row-price-info-wrapper").html(c[2]),e.find(".evdd-row-prime-badge-wrapper").html(c[3])};(function(){var a;f.dimOrder=d[b.STRING_DIM_ORDER];f.dimName=d[b.STRING_DIM_NAME];f.dimensionsMap=d[b.STRING_DIMENSIONS_MAP];f.dimNameDisplayString=d[b.STRING_DIMENSION_DISPLAY_STRING];f.dimValuesDisplayData=d[b.STRING_DIMENSION_VALUES_DATA];f.displayConfigStylesData=d[b.STRING_DISPLAY_CONFIG_STYLES_DATA];
f.twisterControllerHandle=d[b.STRING_TWISTER_CONTROLLER_HANDLE];f.initialTwisterState=d[b.STRING_TWISTER_INITIAL_STATE_KEY];a=f.initialTwisterState.getCurrentDimCombID();f.dimData=k.getDimStyleData(a,f.dimValuesDisplayData.length,f.dimOrder,f.twisterControllerHandle.twisterAvailabilityCache,f.displayConfigStylesData);f.isMasterDim=!1;if(f.dimOrder==="0")f.isMasterDim=!0;f.dimNameDisplayString=d[b.STRING_DIMENSION_DISPLAY_STRING];m="#evdd-button-"+f.dimName;h="#evdd-table-wrapper-"+f.dimName;g="#evdd-singleton-"+
f.dimName;p.invalid=f.isMasterDim?"evdd-row-default":"evdd-row-hidden";p.available="evdd-row-default";p.selected="evdd-row-selected";w=["evdd-hidden",y,"evdd-row-hidden evdd-row-default evdd-row-selected"].join(" ");o();for(var c=0,v=f.dimData.length;c<v;c++)a="#"+f.dimName+"_"+c,l(a).bind("click",i).bind("touchend",e).bind("touchstart",q).bind("mouseenter",q).bind("mouseleave",r)})()}});t.when("A","twister-variations-data","twister-view","twister-model","twister-model-new","twister-state","twister-availabilty-cache",
"twister-utils","evdd-utils","twister-logger").register("twister-controller",function(n,k,b,a,d,o,i,q,r,e){return function(f,l){var m=this,h=n.$;m.logger=new e(h,this);m.logger.init();m.twisterJSInitData=l;m.pageRefreshRefactor=l.pageRefreshRefactor;m.twisterVariationsData=new k(l);m.twisterAvailabilityCache=new i(m.twisterVariationsData);m.initTwisterState=new o(l,m.twisterVariationsData,m.twisterAvailabilityCache);m.twisterView=new b(m,m.initTwisterState,l,m.twisterVariationsData,m.twisterAvailabilityCache);
m.twisterModel=m.pageRefreshRefactor?new d(m,l,m.twisterVariationsData):new a(m,f,l,m.twisterVariationsData,m.twisterAvailabilityCache);(function(){h(".variations .swatchOuter a").each(function(){var a=jQuery(m).contents();h(m).replaceWith(a)});if(typeof TwisterNonJs!=="undefined")for(var a=TwisterNonJs.handleDropDown.length,b=0;b<a;b++)TwisterNonJs.handleDropDown[b]=function(){};h("#twister .swatches a").remove();h("#twisterNonJsData").html("");m.jsInteractionEnabledTime=Date.now()})();m.populateEVDD=
function(a){var b=this.twisterView,e=this.twisterVariationsData.asinToDimIndexMapData,c=this.twisterModel.twisterState.getMaster();a&&(new r).PopulateEVDD(a,b,e,c)};m.handleClick=function(a){this.divMetaData=a;var b=m.initTwisterState.getCurrentDimCombID(),b=q.reconstructCombinationWithDimValue(b,a.dimIndex,a.dimValueIndex);window.newTwisterInteractionStartTime=new Date;window.ue&&ue.tag&&ue.tag("twisterSwatchClick");if(this.twisterVariationsData.useMS||!q.isSwatchSelected(a,m.twisterVariationsData))this.enableMouseOut=
0,this.twisterModel.handleClick(a),m.twisterAvailabilityCache.isDimCombinationAvailable(b)||m.logger.logImpression(m.logger.eventTypes.CLICK_NA,null)};m.handleClickPrediction=function(a,b){this.twisterModel.prefetch(a,b)};m.handleMouseOver=function(a){if(typeof touchDeviceDetected!="undefined"&&touchDeviceDetected)return this.handleClick(a),!0;this.enableMouseOut=1;this.twisterModel.handleMouseOver(a);return!0};m.handleMouseOut=function(a,b,e){this.enableMouseOut===1&&this.twisterModel.handleMouseOut(a,
b,e)};m.handleDropdownOnChange=function(a,b){b.dimValueIndex=parseInt(a.value.split(",")[0]);window.newTwisterInteractionStartTime=new Date;window.ue&&ue.tag&&ue.tag("twisterDDClick");this.twisterModel.twisterState.setPreHoverData(b);this.twisterModel.handleDropdownChange(b)}}});t.when("A","twister-counter","twister-vodd","twister-beaconized-evdd","twister-native-evdd","twister-dimension-views-swatch","twister-dimension-views-dropdown","twister-IMDD","twister-dimension-views-singleton","twister-string-constants").register("twister-dimension-view-factory",
function(n,k,b,a,d,o,i,q,r,e){var f=n.$;return{getDimensionSubViewObject:function(l,m,h,g,n){var w,c=l.dimensionsDisplayType[h],p=l.dimensionsDisplaySubType[h],x=l.dimensions[h],u=l.dimensions,v=l.dimensionsDisplay[h],F=f.isArray(Twister.isSlotsEnabled)?Twister.isSlotsEnabled[h]:Twister.isImmersiveViewEnabled;dimensionValuesData=m.dimensionValuesData[h];displayConfigStylesData=m.displayConfigStylesData[c];maxSwatchesForImmersiveView=l.maxSwatchesForImmersiveView[h];c===e.TWISTER_DIMENSION_VIEW_SWATCH?
w=o:c===e.TWISTER_DIMENSION_VIEW_DROPDOWN?w=F?q:i:c===e.TWISTER_DIMENSION_VIEW_SINGLETON?w=r:c===e.TWISTER_DIMENSION_VIEW_EVDD?w=f("html").hasClass("a-lt-ie8")?d:a:c===e.TWISTER_DIMENSION_VIEW_VODD?w=b:c===e.TWISTER_DIMENSION_VIEW_COUNTER&&(w=k);m=maxSwatchesForImmersiveView;c={};c[e.STRING_DIM_ORDER]=h;c[e.STRING_DIM_NAME]=x;c[e.STRING_DIMENSIONS_MAP]=u;c[e.STRING_DIMENSION_DISPLAY_STRING]=v;c[e.STRING_DIMENSION_VALUES_DATA]=dimensionValuesData;c[e.STRING_DISPLAY_CONFIG_STYLES_DATA]=displayConfigStylesData;
c[e.STRING_TWISTER_CONTROLLER_HANDLE]=g;c.isImmersiveViewEnabled=f.isArray(Twister.isImmersiveViewEnabled)?Twister.isImmersiveViewEnabled[h]:Twister.isImmersiveViewEnabled;c.isSlotsEnabled=f.isArray(Twister.isSlotsEnabled)?Twister.isSlotsEnabled[h]:Twister.isImmersiveViewEnabled;c[e.STRING_TWISTER_INITIAL_STATE_KEY]=n;c[e.STRING_MAX_SWATCHES_IMMERSIVE_VIEW]=m;c.dimensionDisplaySubType=p;return new w(l,c)}}});t.when("twisterModule").execute(function(){typeof setCSMReq==="function"&&setCSMReq("x2");
typeof uex==="function"&&typeof uet==="function"&&(uet("be","TwisterAUIWait",{wb:1}),uex("ld","TwisterAUIWait",{wb:1}))});t.when("A","cf","twister-js-init-mason-data","twister-js-init-dpx-data","twister-controller","page-refresh-manager","dimensional-summary-module").execute(function(n,k,b,a,d,o,i){function q(){typeof amznJQ!="undefined"?amznJQ.declareAvailable("newTwister"):t.register("newTwister",function(){return window.newTwister});t.register("twisterModule",function(){return{getState:function(){return DetailPage.StateController.getState()}}});
typeof amznJQ!="undefined"?(amznJQ.declareAvailable("pageRefreshJS"),amznJQ.declareAvailable("dpf")):(t.register("pageRefreshJS",function(){return window.pageRefreshJS}),t.register("dpf",function(){return window.pageRefreshJS}))}function r(a){var b={};a.extend(b,{ajaxReadyState:{NONE:-1,UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},ajaxHandlerCode:{OK:0,IGNORE:1,RETRY:2,RELOAD:3,TIMEOUT:4,ABORT:5,FATAL:6,INVALID_RESP:7,INCOMPLETE_RESP:8,PAGELET_FATAL:9,DEBUG_NOAJAX:10},serverCode:{ERROR:-1,
OK:200,TIMEOUT:408},shouldReload:function(){return!1}});window.AJAXFlushUtils=b}window.Twister={};var e=window.Twister;e.$=n.$;e.DimensionViews={};n.on.ready(function(){e.A=n;if(!n.$.isEmptyObject(a)){var f=a.updateDivLists;e.dpEnvironment=a.dpEnvironment;e.isInstaTwisterEnabled=!0;e.productTypeName=b.productTypeName;e.isImmersiveViewEnabled=a.isImmersiveViewEnabledOnDim?a.isImmersiveViewEnabledOnDim:a.isImmersiveViewEnabled;e.isSlotsEnabled=a.isSlotsEnabled;e.isImmersiveViewEnabledOnPage=a.isImmersiveViewEnabled;
e.isImmersiveExperience=a.isImmersiveExperience?a.isImmersiveExperience:a.isImmersiveViewEnabled;e.multiDimensionWeblabEnabled=a.multiDimensionWeblabEnabled?a.multiDimensionWeblabEnabled:!1;e.immersivePartialStateMessage=a.immersivePartialStateMessage?a.immersivePartialStateMessage:"";e.immersiveFullySelectedStateMessage=a.immersiveFullySelectedStateMessage?a.immersiveFullySelectedStateMessage:"";e.immersiveBannersPresent=a.immersiveBannersPresent?a.immersiveBannersPresent:!1;var l=b.contextMetaData,
m=l.full,h=l.master,g=l.parent,l=l.partial;b.dimensionSelectionData=a.dimensionSelectionData;b.dimensionsDisplayType=a.dimensionsDisplayType;b.dimensionsDisplaySubType=a.dimensionsDisplaySubType?a.dimensionsDisplaySubType:[];b.ajaxUrlParams=a.ajaxUrlParams;b.displayTypeProperties=a.displayTypeProperties?a.displayTypeProperties:[];b.maxSwatchesForImmersiveView=a.maxSwatchesForImmersiveView?a.maxSwatchesForImmersiveView:[];b.expandedViewEnabled=a.expandedViewEnabled?a.expandedViewEnabled:[];b.minAsinForExpandedView=
a.minAsinForExpandedView?a.minAsinForExpandedView:[];b.minAsinForExpandedScroll=a.minAsinForExpandedScroll?a.minAsinForExpandedScroll:[];if(typeof a.twisterUpdateURLAppend!=="undefined"){var k=b.twisterUpdateURLInfo,w=k.immutableURLPrefix,c=k.immutableParams,p=a.twisterUpdateURLAppend.immutableParams,x;for(x in p)if(typeof p.hasOwnProperty!=="function"||p.hasOwnProperty(x))w+=(w.indexOf("?")==-1?"?":"&")+x+"="+p[x],c[x]=p[x];k.immutableURLPrefix=w}if(a.shouldUseDPXTwisterData)b.dimToAsinMapData=a.dimensionToAsinMap,
b.asinToDimIndexMapData=a.asinToDimensionIndexMap,b.dimensionValuesData=a.dimensionValuesData,b.variation_values=a.variationValues,b.asin_variation_values=a.asinVariationValues,b.reactId=a.reactId,b.currentDimCombID=a.currentDimensionCombinationId,b.selected_variation_values=a.selectedVariationValues;f.full!=null&&(m.elementList=m.elementList!=null?f.full.concat(m.elementList):f.full);f.master!=null&&(h.elementList=h.elementList!=null?f.master.concat(h.elementList):f.master);f.parent!=null&&(g.elementList=
g.elementList!=null?f.parent.concat(g.elementList):f.parent);f.partial!=null&&(l.elementList=l.elementList!=null?f.partial.concat(l.elementList):f.partial)}f=b.isTablet;window.twisterInitPrefetchMode=b.twisterInitPrefetchMode;window.jqupgrade=b.jqupgrade;e.useDropdownThumbnail=f;e.useVariationsOverlay=f;e.showErrorMessageOnFailure=f;e.remainingAjaxCalls=0;e.errorMessageOnFailure="We are sorry.  Amazon has encountered an error.  Please try again.";e.isLoggingEnabled=b.isLoggingEnabled;e.printConsoleLogs=
b.printConsoleLogs;e.deviceType=b.deviceType;e.useAui=1;e.useAuiAjax=1;f=b.measurement.atf.marker;e.atfMarkerCount=b.measurement.atf.count;m=b.measurement.cf.marker;e.cfMarkerCount=b.measurement.cf.count;e.cfImageLongPollTag=b.measurement.cf.longPollImageTag;e.cfHtmlLongPollTag=b.measurement.cf.longPollHtmlTag;f=new o(n.$,b.contextMetaData,{atfMarker:f,cfMarker:m,logChannel:"twister"},b.loadingBarHtml,b.loadingBarHtml2);window.twisterController=new d(f,b);f={};f.dimensionsList=b.dimensions;f.dimensionValuesList=
b.dimensionValuesData;f.dimensionCombinationToASINMap=b.dimToAsinMapData;f.scopeSuffix="twister";e.dimensionalSummaryModule=new i(f);r(n.$);q()});e.isIEBrowser=function(a){return a.browser.msie||!!navigator.userAgent.match(/Trident/)};e.isIE8=function(){var a=e.A.$;return a("html").hasClass("a-lt-ie9")};return e});t.when("A","twister-state","twister-utils","detail-page-framework","twister-string-constants").register("twister-model",function(n,k,b,a){return function(d,o,i,k,r){function e(a){var b,
e,c,d,m,l=h.twisterState.parentASIN,i;a?(b=h.twisterState.reactId,e=h.twisterState.hoveredReactId,c=h.twisterState.unselectedDimCount,d=h.twisterState.hoveredDimCombID.search(/X/)>=0?1:0,m=h.twisterState.hoveredAsin):(b=h.twisterState.previousReactId,e=h.twisterState.reactId,c=h.twisterState.previousPartialState,d=h.twisterState.partialState,m=h.twisterState.getCurrentASIN());i=h.twisterVariationsData.asinToDimIndexMapData[m];h.twisterVariationsData.useMS&&i&&m&&f(h.fetchMasterIDList,"m"+i[0],m,0,
a);d===0?(f(h.fetchFullIDList,m,m,0,a),h.prioritizeReqPrefetch=0):c===0?(f(h.fetchPartialIDList,e,m,0,a),f(h.fetchParentIDList,l,l,0,a),h.prioritizeReqPrefetch=1):b!==e&&f(h.fetchPartialIDList,e,m,0,a)}function f(a,b,e,c,d){d||(d=0);if(h.idsList[b]!=1&&b&&e&&(!h.prefetchFixWeblab||!(e===h.twisterState.parentASIN&&a.type==="full"))&&a)h.idsList[b]=1,a.data.push({id:b,asin:e,isPrefetch:c,isHover:d})}function l(a){a||(a=0);var b=[];h.fetchParentIDList.data.length>0&&b.push({type:"parent",idList:h.fetchParentIDList.data});
h.fetchPartialIDList.data.length>0&&b.push({type:"partial",idList:h.fetchPartialIDList.data});h.fetchFullIDList.data.length>0&&b.push({type:"full",idList:h.fetchFullIDList.data});h.fetchMasterIDList.data.length>0&&b.push({type:"master",idList:h.fetchMasterIDList.data});b.length>0&&(a||h.pageRefresh.measurement.stampCustomMetrics("ns",h.twisterState.currentASIN),h.pageRefresh.react(b,a));h.fetchParentIDList.data=[];h.fetchPartialIDList.data=[];h.fetchFullIDList.data=[];h.fetchMasterIDList.data=[];
h.idsList={};h.prefetchCount=0}function m(a,e){for(var d={},c="",f=0;f<e.length;f++)c=null,h.twisterState.isDimSelected(f)&&(c=e[f],c==="(Please Select)"&&(c=null)),c!==null&&(c=b.htmlUnescape(c)),d[h.viewHandle.dimensionsMap[f]]=c;DetailPage.StateController.setState(a+"_variations",d)}var h=this;h.twisterControllerHandle=d;h.pageRefresh=o;h.twisterJSInitData=i;h.twisterVariationsData=k;h.twisterAvailabilityCache=r;h.prefetchCount=0;h.preHoverClass="";h.fetchParentIDList={type:"parent",data:[]};h.fetchPartialIDList=
{type:"partial",data:[]};h.fetchFullIDList={type:"full",data:[]};h.fetchMasterIDList={type:"master",data:[]};h.idsList={};h.prefetchFixWeblab=0;h.prioritizeReqPrefetch=0;h.handleMouseOver=function(a){var d;if(a!==null&&(h.twisterState.updateStateOnMouseOver(a),!b.isSwatchSelected(a,h.twisterVariationsData)||h.twisterVariationsData.useMS))d=h.twisterVariationsData.getDimensionValuesDisplayData(h.twisterState.hoveredAsin),h.twisterVariationsData.useMS||m("hovered",d),this.viewHandle.updateView(a,h.twisterState,
"mouseOver"),e(1),l(1)};h.handleDropdownChange=function(a){h.handleClick(a)};h.handleClick=function(d,f,i){var c=i?"mouseOut":"click",p=0,k=f,u=h.twisterState.getCurrentASIN();h.twisterVariationsData.useMS&&d&&b.isSwatchSelected(d,h.twisterVariationsData)&&(p=1);i||(i=0);if(!(k===null&&d===null)&&h.twisterState.updateStateOnClick(d,f,c)){k=h.twisterState.getCurrentASIN();if(!i&&u!==k&&!h.twisterState.partialState&&a.callbacks["sims-widget_feature_div"])a.callbacks["sims-widget_feature_div"](DetailPage.StateController.getState());
!h.twisterState.partialState&&!i&&h.pageRefresh.measurement.start(k);d=h.twisterVariationsData.getDimensionValuesDisplayData(k);m("selected",d);m("hovered",d);!h.twisterState.partialState&&!i&&h.pageRefresh.measurement.stampCustomMetrics("bb",k);h.viewHandle.updateView({},h.twisterState,c);!h.twisterState.partialState&&!i&&h.pageRefresh.measurement.stampCustomMetrics("be",k);p!==1&&(e(i),l(i))}};h.handleMouseOut=function(a){var e=h.twisterState.getCurrentASIN();(h.twisterVariationsData.useMS||!b.isSwatchSelected(a,
h.twisterVariationsData))&&h.handleClick(null,e,1)};(function(){var a;if(h.twisterJSInitData){h.twisterState=h.twisterControllerHandle.initTwisterState;h.MAX_PREFETCH_COUNT=h.twisterJSInitData.prefetchCount;h.prioritizeReqPrefetch=h.twisterJSInitData.prioritizeReqPrefetch;h.prefetchFixWeblab=h.twisterJSInitData.prefetchFixWeblab;a=h.twisterState.getCurrentASIN();a=h.twisterVariationsData.getDimensionValuesDisplayData(a);if(!h.viewHandle)h.viewHandle=h.twisterControllerHandle.twisterView;m("selected",
a);m("hovered",a)}h.pageRefresh.init(h.twisterJSInitData.storeID,h.twisterJSInitData.productGroupID)})()}});t.when("A","jQuery","twister-state","twister-utils","twister-string-constants","page-refresh:controller").register("twister-model-new",function(n,k,b,a,d,o){return function(b,k,r){function e(b,e,g,i){if(e&&!l.twisterVariationsData.useMS&&a.isSwatchSelected(e,l.twisterVariationsData))return!1;if(l.twisterState.updateStateOnClick(e,g,i,b)){e=l.twisterVariationsData.getDimensionValuesDisplayData(g);
if(!(i!=d.EVENT_TYPE_CLICK&&i!=d.EVENT_TYPE_DROPDOWN_CHANGE)){for(var g=l.twisterState.getCurrentDimCombID().split("_"),k={},c=0,p=l.twisterState.dimensionSelectionData.length;c<p;c++)k[l.twisterState.twisterJSInitData.dimensions[c]]=l.twisterState.dimensionSelectionData[c].isRequired=="1"&&l.twisterState.dimensionSelectionData[c].isSelected=="0"&&g[c]==="X"?"-1":g[c];DetailPage.StateController.setState("selected_variation_values",k)}f("selected",e);f("hovered",e);l.viewHandle.updateView({},l.twisterState,
i);o.updatePage(b,i);return!0}}function f(a,b){for(var e={},d="",f=0;f<b.length;f++)d=null,l.twisterState.isDimSelected(f)&&(d=b[f],d==="(Please Select)"&&(d=null)),e[l.viewHandle.dimensionsMap[f]]=d;DetailPage.StateController.setState(a+"_variations",e)}var l=this;l.twisterControllerHandle=b;l.twisterJSInitData=k;l.twisterVariationsData=r;l.pageRefresh=o.page;l.prefetch=function(a,b){var e=l.twisterState.getRequestContext(a,!0);o.prefetchPage(e,b)};l.handleMouseOver=function(b){if(!b||l.twisterVariationsData.useMS||
!a.isSwatchSelected(b,l.twisterVariationsData)){var e=l.twisterState.getHoverContext(b);l.twisterState.updateStateOnMouseOver(b,e);var g=l.twisterVariationsData.getDimensionValuesDisplayData(e.newAsin);(!l.twisterVariationsData.useMS||b&&b.dimDisplayType===d.TWISTER_DIMENSION_VIEW_VODD)&&f("hovered",g);this.viewHandle.updateView(b,l.twisterState,d.EVENT_TYPE_MOUSEOVER);o.updatePage(e,d.EVENT_TYPE_MOUSEOVER)}};l.handleClick=function(a){var b=l.twisterState.getRequestContext(a);e(b,a,b.childAsin,d.EVENT_TYPE_CLICK)&&
l.twisterVariationsData.dimensionsMap.length>1&&l.viewHandle.updateViewAfterTwisterUpdate(a,l.twisterState,d.EVENT_TYPE_CLICK)};l.handleMouseOut=function(a){a=l.twisterState.getCurrentContext(a);e(a,null,a.currentAsin,d.EVENT_TYPE_MOUSEOUT)};l.handleDropdownChange=function(a){var b=l.twisterState.getRequestContext(a);e(b,a,b.childAsin,d.EVENT_TYPE_DROPDOWN_CHANGE);b&&l.twisterVariationsData.dimensionsMap.length>1&&l.viewHandle.updateViewAfterTwisterUpdate(b.childAsin,l.twisterState,void 0)};(function(){if(l.twisterJSInitData){if(!l.viewHandle)l.viewHandle=
l.twisterControllerHandle.twisterView;l.twisterState=l.twisterControllerHandle.initTwisterState;var a=l.twisterState.getCurrentASIN(),a=l.twisterVariationsData.getDimensionValuesDisplayData(a);f("selected",a);f("hovered",a);o.init(k);n.on("dp:twister:prefetch",function(a,b){l.prefetch(a,b)})}})()}});t.when("A","twister-utils","twister-string-constants").register("twister-native-evdd",function(n,k,b){return function(a,d){var o=this,i=n.$,q;o.dimType="evdd";o.isMasterDim=!1;o.updateView=function(a){var a=
k.getDimStyleData(a.dimCombID,o.dimValuesDisplayData.length,o.dimOrder,o.twisterControllerHandle.twisterAvailabilityCache,o.displayConfigStylesData),b,d="";i(q).empty();for(var l=0,m=a.length;l<m;l++)if(rowData=a[l],b=rowData.style,b!=="invalid"||o.isMasterDim)b=b==="selected"?"selected":"",rowId="#native-"+o.dimName+"_"+l,b='<option id="'+rowId+'" value="'+l+'," '+b+">"+o.dimValuesDisplayData[l]+"</option>",d+=b;i(q).html(d)};o.dimOrder=d[b.STRING_DIM_ORDER];o.dimName=d[b.STRING_DIM_NAME];o.dimValuesDisplayData=
d[b.STRING_DIMENSION_VALUES_DATA];o.isMasterDim=!1;if(o.dimOrder==="0")o.isMasterDim=!0;o.dimNameDisplayString=d[b.STRING_DIMENSION_DISPLAY_STRING];o.displayConfigStylesData=d[b.STRING_DISPLAY_CONFIG_STYLES_DATA];o.twisterControllerHandle=d[b.STRING_TWISTER_CONTROLLER_HANDLE];q="#evdd-select-"+o.dimName;i(q).change(function(){var a=i(q).val(),a=parseInt(a.split(",")[0]);twisterController.handleClick({dimIndex:o.dimOrder,dimValueIndex:a})})}});t.when("A","twister-utils","detail-page-state-controller",
"twister-string-constants").register("twister-state",function(n,k,b,a){return function(d,o,i){function q(b){if(b.mType===a.MTYPE_PARENT&&b.relatedContext)b=b.relatedContext;return b}function r(b,c,d){var g=y.extend(!0,{},b);g.mType=a.MTYPE_MASTER;g.id="m"+d[0];g.relatedContext=b;g.doNotAbort=!0;g.url=e(g,c,[]);g.uniqueID=f(g,[]);return g}function e(a,b,e){var d=g.twisterJSInitData.twisterUpdateURLInfo,f=d.immutableURLPrefix,h=d.immutableParams,d=d.mutableParams,m=g.twisterJSInitData.contextMetaData[a.mType].mTypeSpecificURLParams,
j={};keyItr=0;j=y.extend(!0,{},d,m);if(e!=null)for(var m=0,l=e.length;m<l;m++){var i=e[m];if(!h.hasOwnProperty(i.key)){var k=i.key,o=i.value;j[k]=o;i.isPersistent&&(d[k]=o)}}for(var q in j)j[q]!=null&&(f+="&"+q+"="+j[q]);f+="&asinList="+a.newAsin+"&isFlushing=2&dpEnvironment="+Twister.dpEnvironment+"&id="+a.id+"&mType="+a.mType;b&&(f+="&prefetchRequest=1");return f}function f(a,b){var e="",d=a.mType,f=[],h=y.extend(!0,{},g.twisterJSInitData.twisterUpdateURLInfo.mutableParams);if(b!=null)for(var m=
0,j=b.length;m<j;m++){var l=b[m];h[l.key]=l.value}for(var i in h)h.hasOwnProperty(i)&&f.push(i);f.sort();m=0;for(j=f.length;m<j;m++)l=f[m],l!=null&&h!=null&&(e+=l+"="+h[l]+"&");e+="mType="+d+"&id="+a.id;return e}function l(b){var c=b[a.STRING_DIM_INDEX],e=b[a.STRING_DIM_VALUE_INDEX],b=g.getCurrentDimCombID().split("_");b[c]=e===-1?"X":e;b=b.join("_");return g.twisterAvailabilityCache.gAsinToRender(b,c)}function m(b,c){var e=g.getCurrentDimCombID().split("_"),d=e.length,f=g.twisterVariationsData.asinToDimIndexMapData[b],
h=-1,m;if(f)f=f.slice(0);else{f=[];for(m=0;m<d;m++)f[m]="X"}c!==null&&c!==void 0&&(h=c[a.STRING_DIM_INDEX]);for(var j=0;j<d;j++)if((m=g.dimensionSelectionData[j][a.STRING_IS_REQUIRED])&&j!==parseInt(h)&&f[j]!=e[j])f[j]="X",g.sizeSwatch&&g.partialState!=0&&(g.dimensionSelectionData[j][a.STRING_IS_SELECTED]=0);return f.join("_")}function h(b,c){for(var e=b.split("_"),d=0;d<g.dimensionSelectionData.length;d++)g.dimensionSelectionData[d][a.STRING_IS_REQUIRED]===1&&c!==0&&(e[d]="X");return e.join("_")}
var g=this,y=n.$;g.twisterJSInitData=d;g.twisterVariationsData=o;g.twisterAvailabilityCache=i;g.parentASIN="";g.currentASIN="";g.dimensionSelectionData={};g.unselectedDimCount=-1;g.master="";g.currentDimCombID="";g.preHoverClass="";g.hoveredReactId="";g.hoveredAsin="";g.hoveredDimCombID="";g.partialState="";g.previousPartialState="";g.previousReactId="";g.previousAsin="";g.sizeSwatch=!1;g.setMaster=function(a){g.master=a};g.getMaster=function(){return g.master};g.getCurrentASIN=function(){return g.currentASIN};
g.setCurrentASIN=function(a){if(a)g.currentASIN=a};g.getCurrentDimCombID=function(){return g.currentDimCombID};g.setCurrentDimCombID=function(a){if(a)g.currentDimCombID=a};g.isDimSelected=function(b){return g.dimensionSelectionData[b][a.STRING_IS_SELECTED]===1};g.setPreHoverData=function(b){if(!g.useMS)g.preHoverClass=k.getAttachedClass(b,g.twisterVariationsData.dimensionsMap[b[a.STRING_DIM_INDEX]])};g.updateStateOnMouseOver=function(b,c){var e,d;b&&b[a.STRING_DIM_INDEX]==="0"&&g.setMaster(b[a.STRING_DIM_VALUE_INDEX]);
e=c&&c.childAsin||l(b);d=g.unselectedDimCount;if(e===""){if(d<=0)return;e=g.getCurrentASIN()}g.hoveredAsin=e;e=c&&c.newDimCombID||m(g.hoveredAsin,b);g.hoveredDimCombID=e;d=e.search(/X/)>=0?1:0;e=c&&c.reactID||h(e,d);g.hoveredReactId=e;g.setPreHoverData(b)};g.updateStateOnClick=function(b,c,e,d){var f=-1,i=-1;g.previousAsin=g.getCurrentASIN();c=c||d&&d.childAsin||l(b);b&&b[a.STRING_DIM_INDEX]&&b[a.STRING_DIM_INDEX]==="0"&&g.setMaster(b[a.STRING_DIM_VALUE_INDEX]);f=g.unselectedDimCount;g.previousPartialState=
f;if(c===""){if(f<=0)return!1;c=g.getCurrentASIN()}f=d&&d.newDimCombID||m(c,b);if(a.EVENT_TYPE_CLICK===e||a.EVENT_TYPE_DROPDOWN_CHANGE===e){var k=b[a.STRING_DIM_INDEX],e=typeof g.preHoverClass!=="undefined"&&(g.preHoverClass.indexOf(a.CLASS_FOR_SWATCH_UNAVAILABLE)!==-1||g.preHoverClass.indexOf(a.CLASS_FOR_DROPDOWN_UNAVAILABLE)!==-1),j=f.split("_"),i=g.currentDimCombID.split("_");j[k]="*";i[k]="*";k=j.join("_");i=i.join("_");k!=i&&(e=!0);if(e||b[a.STRING_DIM_VALUE_INDEX]===-1)for(var i=f.split("_"),
j=0,o=g.dimensionSelectionData.length;j<o;j++)k=g.dimensionSelectionData[j],i[j]==="X"&&k[a.STRING_IS_SELECTED]===1&&(k[a.STRING_IS_SELECTED]=0,g.unselectedDimCount++);DetailPage.StateController.setState("isUnavailableInOldDimCombId",e?"true":"false");e=b[a.STRING_DIM_INDEX];if(b!==null&&b!==void 0&&(e=g.dimensionSelectionData[e],e[a.STRING_IS_SELECTED]===0&&parseInt(b[a.STRING_DIM_VALUE_INDEX])!==-1&&(e[a.STRING_IS_SELECTED]=1,g.unselectedDimCount--,g.unselectedDimCount<0)))g.unselectedDimCount=
0;i=g.unselectedDimCount;g.previousReactId=g.reactId}else i=f.search(/X/)>=0?1:0,g.previousReactId=g.hoveredReactId;b=d&&d.reactID||h(f,i);g.partialState=i;g.setCurrentASIN(c);g.setCurrentDimCombID(f);g.reactId=b;DetailPage.StateController.setState("current_asin",g.getCurrentASIN());DetailPage.StateController.setState("currentDimCombID",g.getCurrentDimCombID());DetailPage.StateController.setState("reactId",g.reactId);DetailPage.StateController.setState("dimensionSelectionData",g.dimensionSelectionData);
return!0};g.getCurrentContext=function(){var a=g.getRequestContext();return q(a)};g.getHoverContext=function(a){a=g.getRequestContext(a);return q(a)};g.getRequestContext=function(b,c){var d=g.getCurrentASIN(),i=g.parentASIN,k;k=b&&l(b)||d;var o=g.getCurrentDimCombID(),q=m(k,b),j=o.search(/X/)>=0?1:0,s=q.search(/X/)>=0?a.MTYPE_PARTIAL:a.MTYPE_FULL;if(!j&&s===a.MTYPE_PARTIAL)s=a.MTYPE_PARENT;var j=s!==a.MTYPE_FULL?1:0,n=h(q,j),d={divMetaData:b,currentAsin:d,newAsin:k,childAsin:k,currentDimCombID:o,
newDimCombID:q,reactID:n,partialState:j,mType:s,id:n.search(/X/)>=0?n:k};if(g.useMS&&k){if(i=g.twisterVariationsData.asinToDimIndexMapData[k])d.relatedContext=r(d,c,i),d.doNotAbort=!0}else if(s===a.MTYPE_PARENT)k=y.extend(!0,{},d),k.mType=a.MTYPE_PARTIAL,k.relatedContext=d,k.url=e(k,c,[]),k.doNotAbort=!0,k.uniqueID=f(k,[]),d.relatedContext=k,d.id=i,d.newAsin=i,d.doNotAbort=!0;d.url=e(d,c,[]);d.uniqueID=f(d,[]);return d};g.getRequestContextForExternalTwisterUpdates=function(b){var c=g.getCurrentASIN(),
d=g.getCurrentDimCombID();d.search(/X/);var m=d.search(/X/)>=0?a.MTYPE_PARTIAL:a.MTYPE_FULL,l=m!==a.MTYPE_FULL?1:0,i=h(d,l),d={divMetaData:{},currentAsin:c,newAsin:c,childAsin:c,currentDimCombID:d,newDimCombID:d,reactID:i,partialState:l,mType:m,id:i.search(/X/)>=0?i:c};if(g.useMS&&c&&(c=g.twisterVariationsData.asinToDimIndexMapData[c]))d.relatedContext=r(d,0,c),d.doNotAbort=!0;d.url=e(d,0,b);d.uniqueID=f(d,b);return d};(function(){var e=g.twisterJSInitData,c=e.keysToPopulateDetailPageStateController,
d;if(e){DetailPage.StateController=new b;for(var f=0,h=c.length;f<h;f++)d=c[f],DetailPage.StateController.setState(d,e[d]);DetailPage.StateController.setState("variation_display_labels",e[a.INIT_DATA_VARIATIONS_DISPLAY_LABELS]);DetailPage.StateController.setState("variation_label_order",e[a.INIT_DATA_DIMENSIONS_MAP]);g.currentASIN=e.current_asin;g.parentASIN=e.parent_asin;g.dimensionSelectionData=e.dimensionSelectionData;g.unselectedDimCount=e.unselectedDimCount;g.currentDimCombID=e.currentDimCombID;
g.reactId=e.reactId;g.storeID=e.storeId;g.productGroupID=e.productGroupId;g.useMS=e[a.STRING_USE_MS];g.useMS&&g.currentASIN&&g.twisterVariationsData.asinToDimIndexMapData[g.currentASIN]&&g.setMaster(g.twisterVariationsData.asinToDimIndexMapData[g.currentASIN][0]);if(y("#sizeSwatch").length)g.sizeSwatch=!0}})()}});t.when("A","twister-string-constants").register("twister-variations-data",function(n,k){return function(b){var a=this;a.twisterJSInitData=b;a.dimensionValuesDisplay={};a.getDimensionValuesDisplayData=
function(b){var k=a.dimensionValuesDisplay[b];!k&&b==a.deletedLandingAsinInfo.asin&&(k=a.deletedLandingAsinInfo.dimValues);return k};(function(){var b=a.twisterJSInitData;a.dimensionsMap=b[k.INIT_DATA_DIMENSIONS_MAP];a.dimensionValuesDisplay=b[k.INIT_DATA_DIMENSION_VALUES_DISPLAY_DATA];a.deletedLandingAsinInfo=b[k.INIT_DATA_DELETED_LANDING_ASIN_INFO];a.dimToAsinMapData=b[k.INIT_DATA_DIM_TO_ASIN_MAP];a.asinToDimIndexMapData=b[k.INIT_DATA_ASIN_TO_DIM_INDEX_MAP];a.dimensionsDisplayType=b[k.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP];
a.dimensionValuesData=b[k.STRING_DIMENSION_VALUES_DATA];a.displayConfigStylesData=b[k.STRING_DISPLAY_CONFIG_STYLES_DATA];a.useMS=b[k.STRING_USE_MS];a.hoverMS=b[k.STRING_HOVER_MS]})()}});t.when("A","twister-dimension-view-factory","twister-string-constants").register("twister-view",function(n,k,b){return function(a,d,o,i,q){function r(a,e,d,f,i){var k={},c={};k[b.STRING_EVENT_TYPE]=a;k[b.STRING_DIM_COMB_ID]=e;c[b.STRING_EVENT_DIV_METADATA]=d;c[b.STRING_EVENT_DIM_INFO]=f;c[b.STRING_DIMENSION_SELECTION_DATA]=
i;k[b.STRING_EVENT_DATA]=c;return k}var e=this,f=n.$;e.twisterControllerHandle=a;e.twisterJSInitData=o;e.twisterVariationsData=i;e.twisterAvailabilityCache=q;e.dimensionsMap={};e.dimensionDisplayMap={};e.dimensionDisplayTypeMap={};e.dimensionViewHandlersMap={};e.updateView=function(a,d,f){var g={},i,k=d.dimensionSelectionData;f===b.EVENT_TYPE_MOUSEOVER?(i=d.hoveredAsin,d=d.hoveredDimCombID):(i=d.getCurrentASIN(),d=d.getCurrentDimCombID());g[b.STRING_DIMENSION_VALUES_DATA]=e.twisterVariationsData.getDimensionValuesDisplayData(i);
g[b.STRING_DIMENSION_DISPLAY_MAP]=e.dimensionDisplayMap;g[b.STRING_DIMENSIONS_MAP]=e.dimensionsMap;a=r(f,d,a,g,k);f=0;for(g=e.dimensionsMap.length;f<g;f++)e.dimensionViewHandlersMap[f].updateView(a)};e.updateViewAfterTwisterUpdate=function(a,d,f){var g={},i=d.dimensionSelectionData;d.getCurrentASIN();d=d.getCurrentDimCombID();g[b.STRING_DIMENSION_DISPLAY_MAP]=e.dimensionDisplayMap;g[b.STRING_DIMENSIONS_MAP]=e.dimensionsMap;a=r(f,d,a,g,i);if(f===b.EVENT_TYPE_DROPDOWN_CHANGE||f===b.EVENT_TYPE_CLICK){f=
0;for(g=e.dimensionsMap.length;f<g;f++)e.dimensionViewHandlersMap[f].updateViewAfterTwisterUpdate&&e.dimensionViewHandlersMap[f].updateViewAfterTwisterUpdate(a)}};(function(a){var d=e.twisterJSInitData;e.dimensionsMap=d[b.INIT_DATA_DIMENSIONS_MAP];e.dimensionDisplayMap=d[b.INIT_DATA_DIMENSIONS_DISPLAY];e.dimensionDisplayTypeMap=d[b.INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP];for(var h=0,g=e.dimensionsMap.length;h<g;h++)d=k.getDimensionSubViewObject(e.twisterJSInitData,e.twisterVariationsData,h.toString(10),
e.twisterControllerHandle,a),e.dimensionViewHandlersMap[h]=d;f(b.CLASS_FOR_NON_JS_EVDD).hide();f(b.CLASS_FOR_NEW_TWISTER_EVDD).show()})(d)}});t.when("A","a-dropdown","twister-thumbnailModule","twister-utils","twister-string-constants").register("twister-dimension-views-dropdown",function(n,k,b,a,d){return function(o,i){function q(){var a=d.DROPDOWN_DIV_NAME+e.dimName,b={},f;b[d.STRING_DIM_INDEX]=e.dimOrder;f=function(a){e.twisterControllerHandle&&e.twisterControllerHandle.handleDropdownOnChange(a,
b)};t.when("A").execute(function(b){b.on(d.AUI_DROPDOWN_EVENT_PREFIX+a,f)})}function r(b){var i,h,g,k;h=d.ID_SELECTOR+e.dimName+d.CHAR_UNDERSCORE+d.INDEX_FOR_SELECT_OPTION;var o=d.NATIVE_DROPDOWN_DIV_PREFIX+d.DROPDOWN_DIV_NAME+e.dimName,c=f(o).val().split(",")[0],p=b[d.STRING_EVENT_TYPE],q=b[d.STRING_EVENT_DATA][d.STRING_DIMENSION_SELECTION_DATA],b=a.getDimStyleData(b.dimCombID,e.dimValuesDisplayData.length,e.dimOrder,e.twisterControllerHandle.twisterAvailabilityCache,e.displayConfigStylesData);q[e.dimOrder][d.STRING_IS_SELECTED]===
0&&c!==d.INDEX_FOR_SELECT_OPTION&&typeof e.AuiDropdownHandle!=="undefined"&&e.AuiDropdownHandle.getSelect(o).val("-1");(p===d.EVENT_TYPE_CLICK||p===d.EVENT_TYPE_DROPDOWN_CHANGE)&&q[e.dimOrder][d.STRING_IS_REQUIRED]===0&&q[e.dimOrder][d.STRING_IS_SELECTED]===1&&f(h).remove();c=0;for(q=b.length;c<q;c++)if(i=b[c],h=d.NATIVE_DROPDOWN_DIV_PREFIX+e.dimName+d.CHAR_UNDERSCORE+c,i=i[d.STRING_STYLE],g=f(h).get(0).className,i===d.CLASS_NAME_FOR_SELCTED_DROPDOWN_OPTION&&(k=f(h).attr("value"),f(o).val()!==k&&
e.AuiDropdownHandle.getSelect(o).val(k)),g!==i)try{g={},g[d.STRING_CSS_CLASS]=i,g[d.STRING_NATIVE_CSS_CLASS]=i,e.AuiDropdownHandle.updateOption(h,g)}catch(u){}e.isTablet&&(p===d.EVENT_TYPE_CLICK||p===d.EVENT_TYPE_DROPDOWN_CHANGE)&&e.thumbnailHandle&&e.thumbnailHandle.update(e.dimName)}var e=this,f=n.$;e.dimType="dropdown";e.AuiDropdownHandle=k;e.thumbnailHandle=b;e.updateView=function(a){a[d.STRING_EVENT_TYPE]===d.EVENT_TYPE_MOUSEOUT?r(a):(a[d.STRING_EVENT_TYPE]===d.EVENT_TYPE_CLICK||a[d.STRING_EVENT_TYPE]===
d.EVENT_TYPE_DROPDOWN_CHANGE)&&r(a)};(function(){var b;e.dimOrder=i[d.STRING_DIM_ORDER];e.dimName=i[d.STRING_DIM_NAME];e.dimensionsMap=i[d.STRING_DIMENSIONS_MAP];e.dimNameDisplayString=i[d.STRING_DIMENSION_DISPLAY_STRING];e.dimValuesDisplayData=i[d.STRING_DIMENSION_VALUES_DATA];e.twisterControllerHandle=i[d.STRING_TWISTER_CONTROLLER_HANDLE];e.displayConfigStylesData=i[d.STRING_DISPLAY_CONFIG_STYLES_DATA];e.initialTwisterState=i[d.STRING_TWISTER_INITIAL_STATE_KEY];e.isTablet=o.isTablet;b=e.initialTwisterState.getCurrentDimCombID();
e.dimStyleData=a.getDimStyleData(b,e.dimValuesDisplayData.length,e.dimOrder,e.twisterControllerHandle.twisterAvailabilityCache,e.displayConfigStylesData);q();if(e.isTablet)for(var f=0,h=e.dimensionsMap.length;f<h;f++)b=e.dimensionsMap[f],e.thumbnailHandle.attach(b),e.thumbnailHandle.preloadAllThumbnails(b)})()}});t.when("A").register("twister-dimension-views-singleton",function(){return function(){this.updateView=function(){}}});t.when("A","twister-dimension-views-unavailablePopover","twister-utils",
"twister-string-constants","twister-dimension-views-ingress","twister-logger","twister-modal-resize-helper").register("twister-dimension-views-swatch",function(n,k,b,a,d,o,i){return function(q,r){function e(b,e){var d=DetailPage.StateController.getState().selected_variations,j=DetailPage.StateController.getState()[a.STRING_DIMENSION_SELECTION_DATA],g;if(c.twisterIngressHandle)g=c.twisterIngressHandle.modalHandle.twisterModalDiv;if(e)p("#variation_"+c.dimName+" .selection").html(b).addClass("hover"),
g&&g.length>0&&p("#"+a.TWISTER_MODAL_ID_PREFIX+c.dimName+" .selection").html(b).addClass("hover");else{var h=p("#variation_"+c.dimName+" .selection"),i=p("#"+a.TWISTER_MODAL_ID_PREFIX+c.dimName+" .selection");if(c.sizeSwatch){var m="";l(j,c.dimOrder)&&b===""||(d[c.dimName]==null?f(j,c.dimOrder)&&(m=b):m=d[c.dimName]);h.html(m).removeClass("hover");g&&g.length>0&&i.html(d[c.dimName]).removeClass("hover")}else p("#variation_"+c.dimName+" .selection").html(b).removeClass("hover"),g&&g.length>0&&p("#"+
a.TWISTER_MODAL_ID_PREFIX+c.dimName+" .selection").html(b).removeClass("hover")}}function f(b,c){var e=!1;1==b[c][a.STRING_IS_SELECTED]&&(e=!0);return e}function l(b,c){var e=!1;1==b[c][a.STRING_IS_REQUIRED]&&(e=!0);return e}function m(b,e){if(c.twisterIngressHandle){c.twisterIngressHandle.modalHandle.isModalOpen&&c.logger.logImpression(c.logger.eventTypes.IMMERSIVE_SWATCH_CLICK,null);var d=c.twisterIngressHandle.modalHandle.twisterModalDiv,f=e===void 0?p(b.$target).parents().closest("li"):e,g=f.attr("id"),
h=p("#"+g);d.has(f)&&g.indexOf(a.MODAL_SWATCH_PREFIX)===0&&(d=c.finalLimitForSwatches-1-1,f=p("#variation_"+c.dimName+" > ul > li"),h.index()>d&&(p(f.get(c.finalLimitForSwatches-1)).remove(),g=g.replace(a.MODAL_SWATCH_PREFIX,""),p(h.clone().attr("id",g)).insertAfter(f.get(d))),c.twisterIngressHandle&&c.twisterIngressHandle.modalHandle.isModalOpen&&c.twisterIngressHandle.modalHandle.closeTwisterModal());c.$swatches=p(c.swatchWrapper);c.twisterIngressHandle.modalHandle.$swatches=p(c.twisterIngressHandle.modalHandle.swatchWrapper)}}
function h(b){var e=Twister.isImmersiveExperience?p("."+a.TWISTER_SWATCH_CLASS_PREFIX+c.dimName+a.CHAR_UNDERSCORE+b):p(a.ID_SELECTOR+c.dimName+a.CHAR_UNDERSCORE+b),b=[],d;if(e.length>0)for(var b=e.get(0).className.split(" "),e=0,f=b.length;e<f;e++){var g=b[e];if(g.indexOf("swatch")===0){d=g;break}}return d}function g(b,e,d){b=Twister.isImmersiveExperience?p("."+a.TWISTER_SWATCH_CLASS_PREFIX+c.dimName+a.CHAR_UNDERSCORE+b):p(a.ID_SELECTOR+c.dimName+a.CHAR_UNDERSCORE+b);e!==d&&p(b).removeClass(e).addClass(d)}
function y(b,e){var d=Twister.isImmersiveExperience?p("."+a.TWISTER_SWATCH_CLASS_PREFIX+c.dimName+a.CHAR_UNDERSCORE+b+" ."+a.PRICE_SLOT_CLASS_NAME):p(a.ID_SELECTOR+c.dimName+a.CHAR_UNDERSCORE+b+"_price"),f=a.CLASS_FOR_PRICE_SECONDARY;if(e===a.CLASS_FOR_SWATCH_SELECT||e===a.CLASS_FOR_SWATCH_UNAVAILABLE_HOVER||e===a.CLASS_FOR_SWATCH_HOVER)f=a.CLASS_FOR_PRICE_SELECTED;d.length&&d.removeClass(a.CLASS_FOR_PRICE_SECONDARY+" "+a.CLASS_FOR_PRICE_SELECTED).addClass(f)}function w(e){var d={};d.asinList=e;p("#"+
a.TWISTER_FEATURE_DIV_ID).css("opacity",c.twisterDimmedOpacity);d.dimTriggeringDimSum=c.dimName;d.dimSubType=c.dimSubType;d.dimCombId=DetailPage.StateController.getState().currentDimCombID;d.executeChunk=function(){var a=DetailPage.StateController.getState().currentDimCombID,e=a.split("_"),f=d.dimCombId.split("_");if(d.dimCombId===a)return!0;else if(!b.isPartialState(c.dimensionsMap.length)){for(var a=c.dimensionsMap.length,g=!0,h=0;h<a;h++)if(h!==parseInt(c.dimOrder)&&f[h]!==e[h]){g=!1;break}return g}return!1};
d.chunk=function(a){for(var b=p(".twister_"+c.dimName+"_"+c.twisterJSInitData.asin_variation_values[a.ASIN][c.dimName]+" .twisterSlotDiv"),e="",d=0;a.Value.content.twisterSlotDiv[d];)c.dimSubType==="IMAGE"&&(e+="<div>"),e+=a.Value.content.twisterSlotDiv[d],c.dimSubType==="IMAGE"&&(e+="</div>"),d++;b.html(e)};d.success=function(){c.resizeHelperHandle.fixSize(c.$swatches,c.swatchWrapper,c.swatchDynaWrapper,c.ingressWrapper);p("#"+a.TWISTER_FEATURE_DIV_ID).css("opacity",1)};d.error=function(){c.resizeHelperHandle.fixSize(c.$swatches,
c.swatchWrapper,c.swatchDynaWrapper,c.ingressWrapper);p("#"+a.TWISTER_FEATURE_DIV_ID).css("opacity",1)};d.abort=function(){c.resizeHelperHandle.fixSize(c.$swatches,c.swatchWrapper,c.swatchDynaWrapper,c.ingressWrapper);p("#"+a.TWISTER_FEATURE_DIV_ID).css("opacity",1)};Twister.dimensionalSummaryModule.fetchDimSumData(d)}var c=this,p=n.$;c.dimType="swatch";c.dimSubType="";c.twisterJSInitData=q;c.newPrefetchWeblab=!1;if(Twister.multiDimensionWeblabEnabled)var x="ImmersiveMultiDimensionView";else Twister.isImmersiveExperience&&
(x="ImmersiveSwatchSingleDimensionView");c.logger=x!==void 0?new o(p,this,x):new o(p,this);c.logger.init();c.sizeSwatch=!1;c.updateView=function(d){if(d[a.STRING_EVENT_TYPE]===a.EVENT_TYPE_MOUSEOVER){var i,m,j,o,q=d[a.STRING_EVENT_DATA],r=q[a.STRING_EVENT_DIM_INFO][a.STRING_DIMENSION_VALUES_DATA][c.dimOrder],q=q[a.STRING_EVENT_DIV_METADATA];if(c.dimOrder==q[a.STRING_DIM_INDEX]){var n=h(q[a.STRING_DIM_VALUE_INDEX]),A=b.getDimStyleData(d.dimCombID,c.dimValuesDisplayData.length,c.dimOrder,c.twisterControllerHandle.twisterAvailabilityCache,
c.displayConfigStylesData);i=c.twisterIngressHandle&&c.twisterIngressHandle.modalHandle.isModalOpen?a.MODAL_SWATCH_PREFIX+c.dimName+"_"+q.dimValueIndex:c.dimName+"_"+q.dimValueIndex;m=c.twisterJSInitData;j={};j.hidePopover=m.hidePopover;j.unavailablePopOverStringValue=m.unavailablePopOverStringValue;j.showDimSecondUnavailablePopover=m.showDimSecondUnavailablePopover;parseInt(q[a.STRING_DIM_INDEX])===parseInt(c.dimOrder)&&n===a.CLASS_FOR_SWATCH_UNAVAILABLE&&!c.twisterJSInitData[a.STRING_HIDE_POPOVER]&&
k.triggerPopover(d,j,i);p(a.ID_SELECTOR+a.TWISTER_POPOVER).css("z-index","2000");e(r,!0);d=0;for(r=A.length;d<r;d++)if(i=A[d],i=i[a.STRING_STYLE],m=h(d),j=m===a.CLASS_FOR_SWATCH_SELECT?!0:!1,o=parseInt(q[a.STRING_DIM_INDEX])===parseInt(c.dimOrder)&&parseInt(q[a.STRING_DIM_VALUE_INDEX])===parseInt(d)?!0:!1,!j&&(n!==a.CLASS_FOR_SWATCH_UNAVAILABLE||o))i===a.CLASS_FOR_SWATCH_SELECT&&(i=m===a.CLASS_FOR_SWATCH_UNAVAILABLE?a.CLASS_FOR_SWATCH_UNAVAILABLE_HOVER:a.CLASS_FOR_SWATCH_HOVER,y(d,i)),g(d,m,i)}}else{eventData=
d[a.STRING_EVENT_DATA];eventDimInfo=eventData[a.STRING_EVENT_DIM_INFO];dimensionValueDisplay=eventDimInfo[a.STRING_DIMENSION_VALUES_DATA][c.dimOrder];divMetaData=eventData[a.STRING_EVENT_DIV_METADATA];dimensionSelectionData=eventData[a.STRING_DIMENSION_SELECTION_DATA];dimCombID=d.dimCombID;dimDataForThisInteraction=b.getDimStyleData(dimCombID,c.dimValuesDisplayData.length,c.dimOrder,c.twisterControllerHandle.twisterAvailabilityCache,c.displayConfigStylesData);c.sizeSwatch?(n=dimCombID.split("_")[0],
q=l(dimensionSelectionData,c.dimOrder),A=f(dimensionSelectionData,c.dimOrder),n=="X"&&q&&A||e(dimensionValueDisplay,!1)):e(dimensionValueDisplay,!1);r=0;for(i=dimDataForThisInteraction.length;r<i;r++){n=dimDataForThisInteraction[r];A=n[a.STRING_STYLE];if(dimensionSelectionData[c.dimOrder][a.STRING_IS_SELECTED]===0&&A===a.CLASS_FOR_SWATCH_SELECT)A=a.CLASS_FOR_SWATCH_AVAILABLE;d=h(r);c.sizeSwatch&&(q=l(dimensionSelectionData,c.dimOrder),m=!f(dimensionSelectionData,c.dimOrder),d==a.CLASS_FOR_SWATCH_SELECT&&
n[a.STRING_STYLE]==a.CLASS_FOR_SWATCH_SELECT&&q&&m&&(A=n[a.STRING_STYLE]));d&&(c.sizeSwatch&&(q=l(dimensionSelectionData,c.dimOrder),(d==a.CLASS_FOR_SWATCH_SELECT||d==a.CLASS_FOR_SWATCH_HOVER)&&q&&A==a.CLASS_FOR_SWATCH_UNAVAILABLE&&e("",!1)),d=h(r),g(r,d,A),y(r,A))}}};c.updateViewAfterTwisterUpdate=function(e){var d=e[a.STRING_EVENT_DATA][a.STRING_EVENT_DIV_METADATA],e=DetailPage.StateController.getState().currentDimCombID.split("_");if(Twister.multiDimensionWeblabEnabled){var f=p(a.ID_SELECTOR+a.MODAL_SWATCH_PREFIX+
c.dimName+"_"+e[c.dimOrder]);m(void 0,f);if(c.isSlotsEnabled)if(b.isPartialState(c.dimensionsMap.length)){e=p(" .twisterSwatchWrapper_"+c.dimOrder+" .twisterSlotDiv");if(e.css("display")!=="none")document.getElementById("twisterSwatchWrapperDynaStyle_"+c.dimOrder).innerHTML=".twisterSwatchWrapper_"+c.dimOrder+" {min-width:100%;min-height:100%;}",e.css("display","none"),c.resizeHelperHandle.fixSize(c.$swatches,c.swatchWrapper,c.swatchDynaWrapper,c.ingressWrapper);Twister.immersiveBannersPresent&&(e=
b.getImmersivePartialStateBannerContent(q,parseInt(c.dimOrder)),d=p("#twisterImmersiveGlanceBanner"),d.html(e),d.removeClass("twisterImmersiveBannerHide"),p("#twisterImmersiveModalBanner").html(e))}else if(d[a.STRING_DIM_INDEX]!=c.dimOrder||DetailPage.StateController.getState().isUnavailableInOldDimCombId==="true"){for(var f=p(a.ID_SELECTOR+"variation_"+c.dimName+" > ul > li"),d=[],g=c.twisterJSInitData.dimensionValuesData[c.dimOrder].length,h=c.isImmersiveViewEnabled?c.finalLimitForSwatches:g,i=
0;i<g;i++)p("."+a.TWISTER_SWATCH_CLASS_PREFIX+c.dimName+"_"+i+" ."+a.CLASSNAME_FOR_SWATCH+"_"+c.dimOrder).css("min-width","");p(a.ID_SELECTOR+a.TWISTER_INGRESS_ID_PREFIX+c.dimName+" ."+a.CLASSNAME_FOR_SWATCH+"_"+c.dimOrder).css("min-width","");p("."+a.CLASSNAME_FOR_INGRESS+"_"+c.dimOrder).css("min-width","");p(a.ID_SELECTOR+a.TWISTER_INGRESS_ID_PREFIX+c.dimName+" ."+a.CLASSNAME_FOR_SWATCH+"_"+c.dimOrder).css("min-height","");for(g=0;g<h;g++){var i=p(f.get(g)).find(".a-declarative"),k=i.attr("data-action"),
i=JSON.parse(i.attr("data-"+k)).dimValueIndex;e[c.dimOrder]=i;var l=e.join("_"),k=p("."+a.TWISTER_SWATCH_CLASS_PREFIX+c.dimName+"_"+i+" .twisterSlotDiv");k.css("display","");(l=c.twisterJSInitData[a.INIT_DATA_DIM_TO_ASIN_MAP][l])?(d.push(l),k.html("<div class='loadingSlot_0' style='width: 40px; margin : 5px 0px 5px 5px; height : 7px'></div><div class='loadingSlot_1'      style='width: 30px; margin : 5px 0px 0px 5px; height : 7px'></div>")):p("."+a.TWISTER_SWATCH_CLASS_PREFIX+c.dimName+"_"+i+" .twisterSlotDiv").html("<span class='a-color-tertiary'>- -</span>")}p(a.ID_SELECTOR+
a.TWISTER_MODAL_ID_PREFIX+c.dimName+" .swatches li").invalidateAppearedAlreadyCache();g=c.twisterJSInitData.dimensionValuesData[c.dimOrder].length;for(i=0;i<g;i++)e=p(a.ID_SELECTOR+a.TWISTER_MODAL_ID_PREFIX+c.dimName+" ."+a.TWISTER_SWATCH_CLASS_PREFIX+c.dimName+"_"+i+" .twisterSlotDiv"),e.css("display",""),e.html("<div class='loadingSlot_0' style='width: 40px; margin : 5px 0px 5px 5px; height : 7px'></div><div class='loadingSlot_1' style='width: 30px;  margin : 5px 0px 0px 5px; height : 7px'></div>");
d.length>0?w(d):c.resizeHelperHandle.fixSize(c.$swatches,c.swatchWrapper,c.swatchDynaWrapper,c.ingressWrapper);Twister.immersiveBannersPresent&&(p("#twisterImmersiveGlanceBanner").addClass("twisterImmersiveBannerHide"),e=b.getImmersiveFullStateBannerContent(q,parseInt(c.dimOrder)),p("#twisterImmersiveModalBanner").html(e))}}};c.isImmersiveViewEnabled=r.isImmersiveViewEnabled;c.isSlotsEnabled=r.isSlotsEnabled;c.newPrefetchWeblab=c.twisterJSInitData.newPrefetchWeblab;c.dimOrder=r[a.STRING_DIM_ORDER];
c.dimName=r[a.STRING_DIM_NAME];c.dimensionsMap=r[a.STRING_DIMENSIONS_MAP];c.dimNameDisplayString=r[a.STRING_DIMENSION_DISPLAY_STRING];c.dimValuesDisplayData=r[a.STRING_DIMENSION_VALUES_DATA];c.displayConfigStylesData=r[a.STRING_DISPLAY_CONFIG_STYLES_DATA];c.twisterControllerHandle=r[a.STRING_TWISTER_CONTROLLER_HANDLE];c.initialTwisterState=r[a.STRING_TWISTER_INITIAL_STATE_KEY];currDimCombID=c.initialTwisterState.getCurrentDimCombID();c.dimData=b.getDimStyleData(currDimCombID,c.dimValuesDisplayData.length,
c.dimOrder,c.twisterControllerHandle.twisterAvailabilityCache,c.displayConfigStylesData);c.maxSwatchLimitForImmersive=r[a.STRING_MAX_SWATCHES_IMMERSIVE_VIEW];c.dimSubType=r.dimensionDisplaySubType;c.finalLimitForSwatches=c.maxSwatchLimitForImmersive-1;(function(){n.declarative(Twister.isImmersiveExperience?a.AUI_EVENT_FOR_SWATCHTHUMB+"-"+c.dimOrder:a.AUI_EVENT_FOR_SWATCHTHUMB,[a.EVENT_TYPE_CLICK,a.EVENT_TYPE_MOUSEENTER,a.EVENT_TYPE_MOUSELEAVE,a.EVENT_TYPE_MOUSEDOWN,a.EVENT_TYPE_TOUCHSTART],function(b){if(b.type===
a.EVENT_TYPE_CLICK)c.twisterControllerHandle&&(c.twisterControllerHandle.handleClick(b.data),m(b));else if(b.type===a.EVENT_TYPE_MOUSEENTER)c.twisterControllerHandle&&c.twisterControllerHandle.handleMouseOver(b.data);else if(b.type===a.EVENT_TYPE_MOUSELEAVE)c.twisterControllerHandle&&c.twisterControllerHandle.handleMouseOut(b.data,b.data[a.STRING_DIM_INDEX],b.data[a.STRING_DIM_VALUE_INDEX]);else if(c.newPrefetchWeblab&&(b.type===a.EVENT_TYPE_MOUSEDOWN||b.type===a.EVENT_TYPE_TOUCHSTART))c.twisterControllerHandle&&
c.twisterControllerHandle.handleClickPrediction(b.data,c.newPrefetchWeblab==="T1"?a.YES:a.NO)})})();(function(){for(var b,e,d=0,f=c.dimData.length;d<f;d++)if(b=c.dimData[d],e=h(d))b=b[a.STRING_STYLE],g(d,e,b),y(d,b)})();(function(){if(p("#twister_ingress_"+c.dimName).length>0){var a={};a.dimName=c.dimName;a.dimOrder=c.dimOrder;a.dimData=c.dimData;a.dimensionsMap=c.dimensionsMap;a.dimNameDisplayString=c.dimNameDisplayString;a.dimValuesDisplayData=c.dimValuesDisplayData;a.maxSwatchLimitForImmersive=
c.maxSwatchLimitForImmersive;a.dimSubType=c.dimSubType;a.isSlotsEnabled=c.isSlotsEnabled;c.twisterIngressHandle=new d(a,c.twisterJSInitData)}})();c.resizeHelperHandle=new i;c.swatchWrapper=".twisterSwatchWrapper_"+c.dimOrder;c.swatchDynaWrapper="twisterSwatchWrapperDynaStyle_"+c.dimOrder;c.$swatches=p(c.swatchWrapper);c.twisterDimmedOpacity=0.2;if(p("#sizeSwatch").length)c.sizeSwatch=!0}});t.when("A","twister-utils","twister-string-constants","scroll-event-handler","twister-vodd-popover").register("twister-vodd",
function(n,k,b,a,d){return function(o,i){function q(){F(j.initialTwisterState.getCurrentDimCombID());f();X&&t.when("A","ready").execute(function(){window.setTimeout(function(){r()},1E3)})}function r(){var a=parseInt(j.dimensionOrder)*sa,b=a,c=function(a,b,c){a.addClass(Y);setTimeout(function(){a.animate({top:c||"0px"},{duration:ta,complete:function(){s(this).removeClass(Y)}})},b)};G.length&&G.parent("td").is(":visible")&&(c(G.parent("td"),a,ua),b=a+va);c(S.parent("td"),b,wa)}function e(a){if(E){var c=
E.length/j.dimValuesDisplayData.length*100,c={divMetaData:w(null),count:Math.ceil(j.dimValuesDisplayData.length/J),percentage:Math.floor(c),dimDisplayType:b.TWISTER_DIMENSION_VIEW_VODD};K.logImpression(a,c)}}function f(){var a={trigger:j.dimensionButton,name:Z,eventListener:j,displayPosition:$},c=D.find("tr");c.length&&c.length>J&&Q&&typeof Q!=="undefined"&&s.extend(a,{height:Q});z=new d(a);j.dimensionButton.bind(k.isTouchDevice()?b.EVENT_TYPE_TOUCHEND:b.EVENT_TYPE_CLICK,function(){if(z&&z.getHandle()&&
z.getHandle().isActive())return z.getHandle().hide(),!1;else K.logImpression(H.CLICK,{time:Date.now()}),k.isTouchDevice()&&j.dimensionButton.trigger("mouseenter")})}function l(a){var b=K.createFunctionTimer(H.DIM_SUM_LOAD);b.start();var c=function(){s.each(a,function(a,b){L.splice(s.inArray(b,L),1)});b.stop()},e=aa+a.join(xa);n.ajax(e,{chunk:function(a){a&&s.isArray(a)&&(s.each(a,function(a,b){j.initialTwisterState.asinDimensionValuesInfo[b.asin]=b}),h(a))},success:function(){b.stop()},error:c,abort:c,
timeout:ya})}function m(a){var b=j.initialTwisterState.getCurrentDimCombID(),c=parseInt(j.dimensionOrder),e=[],d=[];E||(E=[]);for(var f=0;f<a.length;f++){e.length===za&&(l(e),e=[]);var g=y(a[f].id);combination=k.reconstructCombinationWithDimValue(b,c,g);asin=ba[combination];E.indexOf(g)<0&&E.push(g);asin&&(s.inArray(asin,L)>-1||(e.push(asin),L.push(asin)),j.initialTwisterState.asinDimensionValuesInfo[asin]&&d.push(j.initialTwisterState.asinDimensionValuesInfo[asin]))}e.length>0&&l(e);d.length>0&&
h(d)}function h(a){a&&s.each(a,function(a,b){var c=M[b.asin][parseInt(j.dimensionOrder)],c=D.find(T+c);s(c).find("."+U).hide();b&&(b.isAvailable?(b.hasFreshBadge?s(c).find("i."+ca).removeClass(R):b.hasPrimeBadge&&s(c).find("i."+da).removeClass(R),b.isPriceHidden?s(c).find("."+ea).show():b.price&&s(c).find("."+fa).html(b.price).show(),b.ppu&&s(c).find("."+ga).html(b.ppu).show(),b.isSnsEligible&&!b.hasFreshBadge&&s(c).find("."+ha).show()):b.availability?s(c).find("."+ia).html(b.availability).show():
s(c).find("."+ja).show(),s(c).find("."+ka).show())})}function g(a){a=k.getVisibleTableRows(a.currentTarget,D.find("tr"));m(a)}function y(a){if(!a)return-1;a=a.split(b.CHAR_UNDERSCORE);return a[a.length-1]}function w(a){return{dimIndex:j.dimensionOrder,dimValueIndex:a?y(a.id):null,dimDisplayType:b.TWISTER_DIMENSION_VIEW_VODD}}function c(a){e(H.CLICK_VARIATION);N||e(H.SCROLL);N=!0;E=null;var b=w(a.currentTarget),c=j.initialTwisterState.getCurrentDimCombID(),c=k.reconstructCombinationWithDimValue(c,
b.dimIndex,b.dimValueIndex);j.twisterControllerHandle&&(v(),j.twisterControllerHandle.handleClick(b));c=j.twisterControllerHandle.twisterAvailabilityCache.isDimCombinationAvailable(c);b={dimensionOrder:j.dimensionOrder,dimensionValueIndex:b.dimValueIndex,isSelectedDimValueAvailable:c};s(a.currentTarget).trigger(Aa,b)}function p(a){s(a.currentTarget).addClass(V);j.twisterControllerHandle&&(a=w(a.currentTarget),j.twisterControllerHandle.handleMouseOver(a))}function x(a){s(a.currentTarget).removeClass(V);
if(j.twisterControllerHandle){var b=w(a.currentTarget),a=y(a.currentTarget.id);j.twisterControllerHandle.handleMouseOut(b,j.dimensionOrder,a)}}function u(a){I.sort(function(c,e){var d=y(c.id),f=y(e.id);if(a[d][b.STRING_STYLE]!==a[f][b.STRING_STYLE])if(a[d][b.STRING_STYLE]===b.CLASS_FOR_VODD_UNAVAILABLE)return 1;else if(a[f][b.STRING_STYLE]===b.CLASS_FOR_VODD_UNAVAILABLE)return-1;return d-f});I.detach().appendTo(D)}function v(){I.unbind(b.EVENT_TYPE_CLICK,c);k.isTouchDevice()||I.unbind(b.EVENT_TYPE_MOUSEENTER,
p).unbind(b.EVENT_TYPE_MOUSELEAVE,x)}function F(a){a=k.getDimStyleData(a,j.dimValuesDisplayData.length,j.dimensionOrder,j.twisterControllerHandle.twisterAvailabilityCache,j.displayConfigStylesData);u(a);for(var c=null,e=0;e<a.length;e++){var d=a[e],f=D.find(T+e);if(d[b.STRING_STYLE]===b.CLASS_FOR_VODD_SELECT){if(c=f,f.addClass(W),S.text(j.dimValuesDisplayData[e]),G.length){var g=f.find("."+Ba);g.length>0?G.prop("src",g.prop("src")).show():G.hide()}}else f.removeClass(W);f.removeClass(V);if(j.dimensionsMap.length>
1){if(d[b.STRING_STYLE]!==b.CLASS_FOR_VODD_UNAVAILABLE)s(f).find("."+la).hide(),s(f).find("."+U).show();else if(s(f).find("."+la).show(),s(f).find("."+U).hide(),s(f).find("."+ma).length){s(f).find(".unavailableV1").addClass("aok-hidden");s(f).find(".unavailableV2").removeClass("aok-hidden");var i=f,d=j.initialTwisterState.getCurrentDimCombID().split("_"),g=[],h=parseInt(j.dimensionOrder),i=y(i[0].id);d[h]=i;for(var i=d.join("_"),i=j.twisterControllerHandle.twisterAvailabilityCache.gAsinToRender(i,
h),i=M[i],l=0;l<d.length;l++)h!==l&&g.push(B[l][i[l]]);d=g.join(", ");s(f).find("."+na).text(d);a:{h=f;d=0;g=parseInt(j.dimensionOrder);h=parseInt(y(h[0].id));for(asin in M)if(parseInt(M[asin][g])===h&&++d>1){d=!0;break a}d=!1}d||s(f).find("."+ma).hide()}else{d=j.initialTwisterState.getCurrentDimCombID().split("_");g=[];for(h=0;h<d.length;h++)parseInt(j.dimensionOrder)!==h&&(i=A[h].toLowerCase(),g.push(i+": "+B[h][d[h]]));d=g.join(", ");s(f).find("."+na).text(d)}s(f).find("."+ia).hide();s(f).find("."+
ja).hide();s(f).find("."+ha).hide();s(f).find("."+fa).hide();s(f).find("."+ea).hide();s(f).find("."+ga).hide();s(f).find("."+ka).hide();s(f).find("i."+da).addClass(R);s(f).find("i."+ca).addClass(R)}}a=D.find("tr");c=a.index(c);e=a.length-J;c>e?(c=e,c<0&&(c=0)):c=c==0?c:c-1;a=a.slice(c,c+J);m(a)}var j=this,s=n.$,z,C,B,A,O,I,D,G,S,oa,pa,qa,ra,T,Z,R="hidden",W="vodd-row-selected",V="vodd-row-hovered",Ba="vodd-dimension-img",ka="lazy-loaded-data",U="vodd-loading-placeholder",da="prime",ca="fresh",fa=
"price",ga="ppu",ha="sns",na="variation-combination-text",ma="variation-more-text",la="unavailable-text",ja="outofstock-text",ia="availability-message",ea="price-hidden",ya=2E4,xa=",",aa,J=0,$="bottom",X=!1,za=7,Q,ta=300,sa=100,va=50,ua="5px",wa="5px",Y="animation-start",N=!1,E,ba,M,L,K,H,Aa="TwisterVODD.dimensionRowClick";j.handlePopoverEvent=function(d,f){if(d===b.EVENT_TYPE_SHOWPOPOVER){v();I.bind(b.EVENT_TYPE_CLICK,c);k.isTouchDevice()||I.bind(b.EVENT_TYPE_MOUSEENTER,p).bind(b.EVENT_TYPE_MOUSELEAVE,
x);N=!1;var i=f.popover.$trigger,j={popover:f};i.addClass("highlighted");i.trigger("TwisterVODD.showPopup",j);C||(O=D.closest(".a-popover-inner"),C=new a(200,O,g));i=D.find("tr."+W);O&&O.length&&O.scrollTop(i.get(0).offsetTop-33)}else d===b.EVENT_TYPE_HIDEPOPOVER?(i=f.popover.$trigger,j={popover:f},N||(e(H.SCROLL),E=null),N=!0,s(i).removeClass("highlighted"),i.trigger("TwisterVODD.hidePopup",j)):d===b.EVENT_TYPE_UPDATEPOPOVERPOSITION&&f.popover.$trigger.trigger("TwisterVODD.updatePopupPosition",{popover:f})};
j.updateView=function(a){a[b.STRING_EVENT_TYPE]===b.EVENT_TYPE_CLICK&&(z&&z.getHandle()&&z.getHandle().hide(),F(a[b.STRING_DIM_COMB_ID]))};j.showVariationSelection=function(){k.isTouchDevice()||j.dimensionButton.trigger("click")};(function(){j.dimensionName=i[b.STRING_DIM_NAME];j.dimensionOrder=i[b.STRING_DIM_ORDER];j.twisterControllerHandle=i[b.STRING_TWISTER_CONTROLLER_HANDLE];j.dimValuesDisplayData=i[b.STRING_DIMENSION_VALUES_DATA];j.displayConfigStylesData=i[b.STRING_DISPLAY_CONFIG_STYLES_DATA];
j.initialTwisterState=i[b.STRING_TWISTER_INITIAL_STATE_KEY];j.dimensionsMap=i[b.STRING_DIMENSIONS_MAP];K=j.twisterControllerHandle.logger;H=K.eventTypes;B=j.initialTwisterState.twisterAvailabilityCache.twisterVariationsData.dimensionValuesData;A=j.twisterControllerHandle.twisterJSInitData.dimensionsDisplay;ba=j.twisterControllerHandle.twisterJSInitData.dimToAsinMapData;M=j.twisterControllerHandle.twisterJSInitData.asinToDimIndexMapData;if(!j.initialTwisterState.asinDimensionValuesInfo)j.initialTwisterState.asinDimensionValuesInfo=
{};L=[];qa=b.ID_SELECTOR+"vodd-button-"+j.dimensionName;oa=b.ID_SELECTOR+"vodd-button-label-"+j.dimensionName;ra=b.ID_SELECTOR+"vodd-table-"+j.dimensionName;pa=b.ID_SELECTOR+"dimension-button-img-"+j.dimensionName;T=b.ID_SELECTOR+j.dimensionName+b.CHAR_UNDERSCORE;Z="vodd-popover-"+j.dimensionName;var a=parseInt(j.dimensionOrder),c=o[b.INIT_DATA_DISPLAY_TYPE_PROPERTIES];c&&s.isArray(c)&&c.length>a&&(a=c[a],a[b.INIT_DATA_VISIBLE_ROW_COUNT]&&(J=a[b.INIT_DATA_VISIBLE_ROW_COUNT]),a[b.INIT_DATA_MAX_POPOVER_HEIGHT]&&
(Q=a[b.INIT_DATA_MAX_POPOVER_HEIGHT]),a[b.INIT_DATA_ANIMATE_BUTTON_CONTENT]&&(X=a[b.INIT_DATA_ANIMATE_BUTTON_CONTENT]),a[b.INIT_DATA_POPOVER_POSITION]&&($=a[b.INIT_DATA_POPOVER_POSITION]));aa="/gp/twister/variationinfo?vs=1"+(j.twisterControllerHandle.twisterJSInitData.ajaxUrlParams?j.twisterControllerHandle.twisterJSInitData.ajaxUrlParams:"")+"&asinList=";j.dimensionButton=s(qa);D=s(ra);I=D.find("tr");G=s(pa);S=s(oa);a=Math.ceil(j.dimValuesDisplayData.length/J);K.logImpression(H.DIM_INIT,{count:a,
dimDisplayType:b.TWISTER_DIMENSION_VIEW_VODD});q()})()}});t.when("A","twister-string-constants").register("twister-dimension-views-unavailablePopover",function(n,k){function b(a,b,i,q,r){for(var e="",f=0;f<b.length;f++)f!==a&&b[f][k.STRING_IS_SELECTED]===1&&(e=e?e+", "+i[f]:i[f]);e="<strong>"+e+"</strong>";return r?q+"&nbsp;"+e:e+"&nbsp;"+q}var a=n.$;return{triggerPopover:function(d,o,i){var d=d[k.STRING_EVENT_DATA],q;if(!(typeof touchDeviceDetected!=="undefined"&&touchDeviceDetected)){o=b(d[k.STRING_EVENT_DIV_METADATA][k.STRING_DIM_INDEX],
d[k.STRING_DIMENSION_SELECTION_DATA],d[k.STRING_EVENT_DIM_INFO][k.STRING_DIMENSION_DISPLAY_MAP],o[k.STRING_UNAVAILABLE_POPOVER_STRING_VALUE],o[k.STRING_SHOW_DIM_SECOND_UNAVAILABLE_POPOVER]);d="ap_body";if(a.browser.msie||navigator.userAgent.match(/Trident/))d+=" styleIE";q=a("#"+i);a.AmazonPopover.displayPopover({modal:!1,showOnHover:!0,draggable:!1,showCloseButton:!1,hoverShowDelay:50,hoverHideDelay:0,width:null,closeEventInclude:"CLICK_TRIGGER",literalContent:o,skin:"<div id='twisterPopover' class='ap_popover twisterPopoverSkin a-text-color-white'><div class='ap_header'></div><div class='"+
d+"'><div class='ap_content'></div></div><div class='ap_footer'><div class='ap_middle'></div></div></div>",location:"top",locationElement:Twister.$("#"+i),align:"center",attached:!1,group:"TwisterPopover",locationOffset:[2,22],paddingLeft:5,paddingRight:5,paddingBottom:5,onShow:function(){var b=a("#twisterPopover").width();a.browser.msie?a("#twisterPopover").find(".ap_footer").find(".ap_middle").addClass("twisterPopoverArrow").css({top:"16px",width:b-68+"px"}):a("#twisterPopover").find(".ap_footer").find(".ap_middle").addClass("twisterPopoverArrow").css({width:b-
68+"px"})}},q);a("#"+i).trigger("mouseover.amzPopover")}}}});t.when("A","twister-utils","twister-string-constants","scroll-event-handler","dimensional-summary-module","a-popover","twister-logger").register("twister-IMDD",function(n,k,b,a,d,o,i){return function(a,d){function e(){n.declarative("twister-idd-button-click-"+j.dimOrder,[b.EVENT_TYPE_CLICK,b.EVENT_TYPE_MOUSEENTER,b.EVENT_TYPE_MOUSELEAVE,b.EVENT_TYPE_MOUSEDOWN,b.EVENT_TYPE_TOUCHSTART],function(a){if(a.type===b.EVENT_TYPE_CLICK){j.modalAttachedToButton?
(a="imdd-appear-"+d[b.STRING_DIM_NAME],s("#"+j.immersiveDropdownDivId+" .twister-idd-row").forceAppear({force_process:!0,$window:j.immersiveDropdownDiv,$scrollHandlerDiv:j.immersiveDropdownContentDiv,eventToBeTriggered:a})):(m(),s("#"+j.dropdownButtonId).parents().first("span").before(j.immersiveDropdownDiv),f());j.logger.logImpression(j.logger.eventTypes.IMMERSIVE_DROPDOWN_OPENED,null);j.immersiveDropdownDiv.css("display","block");if(!j.modalAttachedToButton)f(),j.modalAttachedToButton=1;j.immersiveDropdownContentDiv.get(0).scrollHeight>
j.immersiveDropdownContentDiv.get(0).clientHeight?s(b.ID_SELECTOR+j.immersiveDropdownDivId+" ."+b.CLASSNAME_FOR_STYLERBOTTOM).css("display","block"):s(b.ID_SELECTOR+j.immersiveDropdownDivId+" ."+b.CLASSNAME_FOR_STYLERBOTTOM).css("display","none");j.immersiveDropdownDiv.css("display","none");j.immersiveDropdownDiv.css("display","block");k.disableTwisterDiv();j.modalAttachedToButton=1;j.isDropdownOpen=1}});n.declarative("twister-idd-row-click-"+j.dimOrder,[b.EVENT_TYPE_CLICK,b.EVENT_TYPE_MOUSEENTER,
b.EVENT_TYPE_MOUSELEAVE,b.EVENT_TYPE_MOUSEDOWN,b.EVENT_TYPE_TOUCHSTART],function(a){a.type===b.EVENT_TYPE_CLICK?j.twisterControllerHandle&&(j.twisterControllerHandle.handleClick(a.data),l(),j.logger.logImpression(j.logger.eventTypes.IMMERSIVE_DROPDOWN_ROW_CLICK,null)):a.type===b.EVENT_TYPE_MOUSEENTER?j.twisterControllerHandle&&j.twisterControllerHandle.handleMouseOver(a.data):a.type===b.EVENT_TYPE_MOUSELEAVE&&j.twisterControllerHandle&&j.twisterControllerHandle.handleMouseOut(a.data,a.data[b.STRING_DIM_INDEX],
a.data[b.STRING_DIM_VALUE_INDEX])});n.declarative("twister-idd-close-button-"+j.dimOrder,[b.EVENT_TYPE_CLICK],function(a){a.type===b.EVENT_TYPE_CLICK&&(l(),j.logger.logImpression(j.logger.eventTypes.IMMERSIVE_DROPDOWN_CLOSED,null))});s(document).ready(function(){s(document).click(function(a){a.target.id!=j.immersiveDropdownDivId&&!j.immersiveDropdownDiv.has(a.target).length&&a.target.id!=j.dropdownButtonId&&!j.$dropdownButtonDiv.has(a.target).length&&j.isDropdownOpen&&l()})});s(document).keyup(function(a){a.keyCode==
27&&l()});j.immersiveDropdownContentDiv.bind("scroll",function(){s(this).scrollTop()+s(this).innerHeight()>=this.scrollHeight?(j.logger.logImpression(j.logger.eventTypes.IMMERSIVE_DROPDOWN_FULL_SCROLL,null),s(b.ID_SELECTOR+j.immersiveDropdownDivId+" ."+b.CLASSNAME_FOR_STYLERBOTTOM).css("display","none")):(s(this).scrollTop()==0?s(b.ID_SELECTOR+j.immersiveDropdownDivId+" ."+b.CLASSNAME_FOR_STYLERTOP).css("display","none"):s(b.ID_SELECTOR+j.immersiveDropdownDivId+" ."+b.CLASSNAME_FOR_STYLERTOP).css("display",
"block"),s(b.ID_SELECTOR+j.immersiveDropdownDivId+" ."+b.CLASSNAME_FOR_STYLERBOTTOM).css("display","block"))});j.immersiveDropdownContentDiv.live("DOMMouseScroll mousewheel  wheel",function(a){var c=s(this),e=this.scrollTop,d=this.scrollHeight,f=c.height(),g=a.originalEvent.wheelDelta;typeof g=="undefined"&&(g=-a.originalEvent.deltaY);var i=g>0,h=function(){a.stopPropagation();a.preventDefault();return a.returnValue=!1};if(!i&&-g>d-f-e)return c.scrollTop(d),s(b.ID_SELECTOR+j.immersiveDropdownDivId+
" ."+b.CLASSNAME_FOR_STYLERBOTTOM).css("display","none"),h();else if(i&&g>e)return s(b.ID_SELECTOR+j.immersiveDropdownDivId+" ."+b.CLASSNAME_FOR_STYLERTOP).css("display","none"),c.scrollTop(0),h();else c.scrollTop()+c.innerHeight()>d&&(s(b.ID_SELECTOR+j.immersiveDropdownDivId+" ."+b.CLASSNAME_FOR_STYLERBOTTOM).css("display","block"),s(b.ID_SELECTOR+j.immersiveDropdownDivId+" ."+b.CLASSNAME_FOR_STYLERTOP).css("display","block"))})}function f(){var a=navigator.platform.indexOf("Win")>-1,c=j.immersiveDropdownContentDiv.scrollTop()+
j.immersiveDropdownContentDiv.get(0).scrollHeight>j.immersiveDropdownContentDiv.outerHeight()+15;if(c){var e=parseInt(j.immersiveDropdownDiv.width())+25+"px";j.immersiveDropdownDiv.css("width",e);a&&(a=parseInt(s(b.ID_SELECTOR+j.immersiveDropdownDivId+" ."+b.CLASSNAME_FOR_STYLERBOTTOM).width())-21+"px",s(b.ID_SELECTOR+j.immersiveDropdownDivId+" ."+b.CLASSNAME_FOR_STYLERBOTTOM).css("width",a),s(b.ID_SELECTOR+j.immersiveDropdownDivId+" ."+b.CLASSNAME_FOR_STYLERTOP).css("width",a))}c&&j.logger.logImpression(j.logger.eventTypes.IMMERSIVE_DROPDOWN_VISIBLE_SCROLLBAR,
null)}function l(){k.enableTwisterDiv();j.immersiveDropdownDiv.css("display","none");j.isDropdownOpen=0}function m(){var a="imdd-appear-"+d[b.STRING_DIM_NAME];s("#"+j.immersiveDropdownDivId+" .twister-idd-row").appearedInTwisterImmersiveView({force_process:!0,$window:j.immersiveDropdownDiv,$scrollHandlerDiv:j.immersiveDropdownContentDiv,eventToBeTriggered:a});n.on(a,function(a){for(a=a[0].slice(0);a.length;)j.requestStack.push(a.splice(0,j.maxBatchLimitForIMDD));h()})}function h(){if(!(j.requestStack.length<=
0)&&j.noOfOngoingConnections!==MAX_AJAX_CONNECTIONS_ALLOWED){j.noOfOngoingConnections++;for(var a=j.requestStack.shift(),b=[],e=0,d=a.length;e<d;e++){var f=s(a[e]),f=j.immersiveDropdownDiv.find("#"+f.attr("id")).closest(".a-declarative"),g=f.attr("data-action"),f=JSON.parse(f.attr("data-"+g)).dimValueIndex;b.push(f)}c(b);h()}}function g(a){if(j.initData.fnToDetermineSelectedVariations){if(typeof j.initData.fnToDetermineSelectedVariations==="function")j.currentDimCombOnGlance=j.initData.fnToDetermineSelectedVariations.call(j)}else j.glanceViewSelectedDims=
DetailPage.StateController.getState().selected_variations,j.currentDimCombOnGlance=DetailPage.StateController.getState().currentDimCombID;return a?j.currentDimCombOnGlance.split("_"):j.currentDimCombOnGlance}function o(a){var b=g(!0);b[a]=j.symbolForTriggeringDim;var b=b.join("_"),c={},e={},a=z[a];if(!j.mapOfDimToAsinMaps[b]){for(var d=0,f=a.length;d<f;d++){var i=b.replace(j.symbolForTriggeringDim,d);(i=C[i])?(c[a[d]]=i,e[i]=a[d]):c[a[d]]=""}c&&(j.mapOfDimToAsinMaps[b]=c);e&&(j.mapOfAsinToDimMaps[b]=
e)}}function w(a,b){var c=[],e;e=g(!0).slice(0);e[b]=j.symbolForTriggeringDim;e=e.join("_");e=j.mapOfDimToAsinMaps[e];for(var d=t(),f=z[b],i=0,h=a.length;i<=h;i++){var m=a[i],k=f[m];k&&((k=e[k])?c.push(k):(m=s("#"+ROW_ID_PREFIX+j.dimensionName+"_"+m+" .idd_loading_slot_0"),d||m.html("<span class='a-color-tertiary'>- -</span>")))}return c}function c(a){var c={};c.indices=a;c.dimTriggeringDimSum=d[b.STRING_DIM_NAME];c.dimType=j.dimType;var e=dimensionsList.indexOf(c.dimTriggeringDimSum);o(e);c.asinList=
w(a,e,c);c.asinList.length==0?(j.noOfOngoingConnections--,h()):(c.dimCombId=g(!1),c.executeChunk=function(){var a=DetailPage.StateController.getState().currentDimCombID,b=a.split("_"),e=c.dimCombId.split("_");if(c.dimCombId===a)return!0;else if(!k.isPartialState(j.dimensionsMap.length)){for(var a=j.dimensionsMap.length,d=!0,f=0;f<a;f++)if(f!==parseInt(j.dimOrder)&&e[f]!==b[f]){d=!1;break}return d}return!1},c.chunk=function(a,b){a.dimensionValue=dimensionsList[b.dimIndexTriggeringDimSum]+"_"+z[b.dimIndexTriggeringDimSum].indexOf(j.mapOfAsinToDimMaps[b.hashKey][a.ASIN]);
var c=s("#"+ROW_ID_PREFIX+a.dimensionValue+" .idd_loading_slot_0");c.html(a.Value.content.twisterSlotDiv["0"]);c=s("#"+ROW_ID_PREFIX+a.dimensionValue+" .idd_loading_slot_1");c.html(a.Value.content.twisterSlotDiv["1"])},c.success=function(){j.noOfOngoingConnections--;h()},c.error=function(){j.noOfOngoingConnections--;h()},c.abort=function(){j.noOfOngoingConnections--;h()},Twister.dimensionalSummaryModule.fetchDimSumData(c))}function p(a){var c=s("#"+ROW_ID_PREFIX+j.dimensionName+b.CHAR_UNDERSCORE+
a),a=[],e;if(c.length>0)for(var a=c.get(0).className.split(" "),c=0,d=a.length;c<d;c++){var f=a[c];if(f.indexOf("twister-idd-row-")===0){e=f;break}}return e}function x(a,c,e){a=s("#"+ROW_ID_PREFIX+j.dimensionName+b.CHAR_UNDERSCORE+a);c!==e&&(c==void 0?s(a).addClass(e):s(a).removeClass(c).addClass(e))}function u(a,c){var e=s("#"+ROW_ID_PREFIX+j.dimensionName+b.CHAR_UNDERSCORE+a+" .idd_loading_slot_0 ."+b.PRICE_SLOT_CLASS_NAME),d=b.CLASS_FOR_PRICE_SECONDARY;if(c===B||c===b.CLASS_FOR_SWATCH_UNAVAILABLE_HOVER||
c===CLASS_FOR_IDD_ROW_HOVER)d=b.CLASS_FOR_PRICE_SELECTED;e.length&&e.removeClass(b.CLASS_FOR_PRICE_SECONDARY+" "+b.CLASS_FOR_PRICE_SELECTED+" a-color-tertiary").addClass(d)}function v(a,b){DetailPage.StateController.getState();b?(s("#"+j.dropdownButtonId+" #"+ID_FOR_BUTTON_SELECTION).html(a).addClass("hover"),s("#"+j.immersiveDropdownDivId+" #"+ID_FOR_MODAL_SELECTION).html(a).addClass("hover")):(s("#"+j.dropdownButtonId+" #"+ID_FOR_BUTTON_SELECTION).html(a).removeClass("hover"),s("#"+j.immersiveDropdownDivId+
" #"+ID_FOR_MODAL_SELECTION).html(a).removeClass("hover"))}function t(){for(var a=j.dimensionsMap.length,b=DetailPage.StateController.getState().currentDimCombID.split("_"),c=!1,e=0;e<a;e++)if(e!==parseInt(j.dimOrder)&&b[e]==="X"){c=!0;break}return c}var j=this,s=n.$,z,C,B="twister-idd-row-selected";CLASS_FOR_IDD_ROW_HIDDEN="twister-idd-row-hidden";CLASS_FOR_IDD_ROW_HOVER="twister-idd-row-hover";ID_FOR_MODAL_SELECTION="twister-idd-modal-selection";ID_FOR_BUTTON_SELECTION="twister-idd-button-selection";
ROW_ID_PREFIX="twister_idd_";DEFAULT_DISPLAY_VALUE="Select";j.symbolForTriggeringDim="*";j.currentDimCombOnGlance="";j.twisterFeatureDiv=s("#twister_feature_div");j.mapOfDimToAsinMaps={};j.mapOfAsinToDimMaps={};j.updateView=function(a){if(a[b.STRING_EVENT_TYPE]===b.EVENT_TYPE_MOUSEOVER){var c,e;c=a[b.STRING_EVENT_DATA];var d=c[b.STRING_EVENT_DIM_INFO][b.STRING_DIMENSION_VALUES_DATA][j.dimOrder];c=c[b.STRING_EVENT_DIV_METADATA];if(j.dimOrder==c[b.STRING_DIM_INDEX])p(c[b.STRING_DIM_VALUE_INDEX]),a=
k.getDimStyleData(a.dimCombID,j.dimValuesDisplayData.length,j.dimOrder,j.twisterControllerHandle.twisterAvailabilityCache,j.displayConfigStylesData),c.dimValueIndex===-1?v(DEFAULT_DISPLAY_VALUE,!0):v(d,!0),d=c.dimValueIndex,d>-1&&(a=a[d],a=a[b.STRING_STYLE],c=p(d),e=c===B?!0:!1,e||(a===B&&(a=c==="twister-idd-row-unavailable"?"twister-idd-row-unavailable-hover":CLASS_FOR_IDD_ROW_HOVER,u(d,a)),x(d,c,a)))}else{eventData=a[b.STRING_EVENT_DATA];eventDimInfo=eventData[b.STRING_EVENT_DIM_INFO];dimensionValueDisplay=
eventDimInfo[b.STRING_DIMENSION_VALUES_DATA][j.dimOrder];divMetaData=eventData[b.STRING_EVENT_DIV_METADATA];dimensionSelectionData=eventData[b.STRING_DIMENSION_SELECTION_DATA];dimCombID=a.dimCombID;dimDataForThisInteraction=k.getDimStyleData(dimCombID,j.dimValuesDisplayData.length,j.dimOrder,j.twisterControllerHandle.twisterAvailabilityCache,j.displayConfigStylesData);if(dimensionSelectionData[j.dimOrder][b.STRING_IS_SELECTED]===0){if(a.eventType==="click"&&(e=p("-1")))e=p("-1"),x("-1",e,B);v(DEFAULT_DISPLAY_VALUE,
!1)}else{if(a.eventType==="click"&&(e=p("-1")))e=p("-1"),x("-1",e,"twister-idd-row-available");v(dimensionValueDisplay,!1)}d=0;for(a=dimDataForThisInteraction.length;d<a;d++){c=dimDataForThisInteraction[d];c=c[b.STRING_STYLE];if(dimensionSelectionData[j.dimOrder][b.STRING_IS_SELECTED]===0&&c===b.CLASS_FOR_SWATCH_SELECT)c=b.CLASS_FOR_SWATCH_AVAILABLE;if(e=p(d))e=p(d),x(d,e,c),u(d,c)}}};j.updateViewAfterTwisterUpdate=function(c){var e=c[b.STRING_EVENT_DATA][b.STRING_DIMENSION_SELECTION_DATA][j.dimOrder][b.STRING_IS_SELECTED],
c=t();if(k.isPartialState(j.dimensionsMap.length)&&(e||v(DEFAULT_DISPLAY_VALUE,!1),c)){for(var e=z[j.dimOrder].length,d=0;d<e;d++)s("#"+ROW_ID_PREFIX+j.dimensionName+"_"+d+" .idd_loading_slot_1").css("display","none"),s("#"+ROW_ID_PREFIX+j.dimensionName+"_"+d+" .idd_loading_slot_0").css("display","none");Twister.multiDimensionWeblabEnabled&&Twister.immersiveBannersPresent&&(e=k.getImmersivePartialStateBannerContent(a,parseInt(j.dimOrder)),s("#twisterImmersiveDropdownBanner_"+j.dimOrder).html(e))}if(!c){c=
z[j.dimOrder].length;for(e=0;e<c;e++)d=s("#"+ROW_ID_PREFIX+j.dimensionName+"_"+e+" .idd_loading_slot_1"),d.html(""),d.css("display",""),d=s("#"+ROW_ID_PREFIX+j.dimensionName+"_"+e+" .idd_loading_slot_0"),d.html("Loading details..."),d.css("display","");Twister.multiDimensionWeblabEnabled&&Twister.immersiveBannersPresent&&(c=k.getImmersiveFullStateBannerContent(a,parseInt(j.dimOrder)),s("#twisterImmersiveDropdownBanner_"+j.dimOrder).html(c))}s("#"+j.immersiveDropdownDivId+" .twister-idd-row").invalidateAppearedAlreadyCache()};
(function(){j.dimensionName=d[b.STRING_DIM_NAME];j.dimOrder=d[b.STRING_DIM_ORDER];j.twisterControllerHandle=d[b.STRING_TWISTER_CONTROLLER_HANDLE];j.dimValuesDisplayData=d[b.STRING_DIMENSION_VALUES_DATA];j.displayConfigStylesData=d[b.STRING_DISPLAY_CONFIG_STYLES_DATA];j.initialTwisterState=d[b.STRING_TWISTER_INITIAL_STATE_KEY];j.dimensionsMap=d[b.STRING_DIMENSIONS_MAP];j.dropdownButtonId="twister-idd-button-"+j.dimensionName;j.$dropdownButtonDiv=s("#"+j.dropdownButtonId);j.immersiveDropdownDivId="twister-idd-modal-"+
j.dimensionName;j.immersiveDropdownDiv=s("#"+j.immersiveDropdownDivId);j.immersiveDropdownContentDiv=s("#twister-idd-table_"+j.dimensionName);j.immersiveDropdownButtonId="twister-idd-table_"+j.dimensionName;j.requestStack=[];j.maxBatchLimitForIMDD=8;j.MAX_AJAX_CONNECTIONS_ALLOWED=2;j.noOfOngoingConnections=0;j.dimType="Dropdown";j.modalAttachedToButton=0;z=j.initialTwisterState.twisterAvailabilityCache.twisterVariationsData.dimensionValuesData;C=j.twisterControllerHandle.twisterJSInitData.dimToAsinMapData;
dimensionsList=j.twisterControllerHandle.twisterJSInitData.dimensions;j.initData={};j.initData.scopeSuffix="twister";j.symbolForTriggeringDim="*";j.displayConfigStylesData.available="twister-idd-row-available";j.displayConfigStylesData.invalid="twister-idd-row-unavailable";j.displayConfigStylesData.selected=B;j.displayConfigStylesData.hidden=CLASS_FOR_IDD_ROW_HIDDEN;j.logger=new i(s,this,Twister.multiDimensionWeblabEnabled?"ImmersiveMultiDimensionView":"ImmersiveDropdownSingleDimensionView");j.logger.init();
j.isDropdownOpen=0;e()})()}});t.when("A","dp-js-logger").register("twister-logger-service",function(n,k){return function(b,a,d){var o=new k,i=d||"";this.logCounters=function(a){b.each(a,function(a,b){var d=i+":"+b.name;Twister.printConsoleLogs&&console.log("Logging metric: "+d+" -> "+b.value);o.logCounter(d,b.value)})};this.init=function(){var d=this;b(window).bind("beforeunload",function(){var b=a.getDataToUploadOnUnload();d.logCounters(b);return null})}}});t.when("A","twister-logger-service","twister-string-constants").register("twister-logger",
function(n,k,b){return function(a,d,o){function i(a){if(!a)return null;var e=d.jsInteractionEnabledTime||Date.now();return(a[b.TWISTER_EVENT_DATA_TIME]||Date.now())-e}function q(a){if(a.hasOwnProperty("getMetricData"))return a.getMetricData();var b=a.stringVal,a=a.hasOwnProperty("getUploadValue")?a.getUploadValue():a.hasOwnProperty("currentValue")?a.currentValue:a.initValue;return isNaN(a)?null:{value:a,name:b}}var r=this,e;this.createFunctionTimer=function(a){return{eventType:a,start:function(){this.startTime=
Date.now()},stop:function(){r.logImpression(this.eventType,{duration:Date.now()-this.startTime})}}};this.eventTypes={CLICK:{metricList:["M_CLICK_COUNT","M_FIRST_CLICK"]},IMMERSIVE_DROPDOWN_OPENED:{metricList:["IMMERSIVE_DROPDOWN_OPEN_COUNT"]},IMMERSIVE_DROPDOWN_CLOSED:{metricList:["IMMERSIVE_DROPDOWN_CLOSE_COUNT"]},IMMERSIVE_DROPDOWN_VISIBLE_SCROLLBAR:{metricList:["IMMERSIVE_DROPDOWN_VISIBLE_SCROLLBAR_COUNT"]},IMMERSIVE_DROPDOWN_FULL_SCROLL:{metricList:["IMMERSIVE_DROPDOWN_FULL_SCROLL_COUNT"]},IMMERSIVE_DROPDOWN_ROW_CLICK:{metricList:["IMMERSIVE_DROPDOWN_ROW_CLICK_COUNT"]},
IMMERSIVE_DROPDOWN_SCROLL:{metricList:["IMMERSIVE_DROPDOWN_SCROLL_COUNT"]},IMMERSIVE_OPTION_CLICK:{metricList:["M_IMMERSIVE_CLICK_COUNT"]},IMMERSIVE_SWATCH_CLICK:{metricList:["M_IMMERSIVE_SWATCH_CLICK_COUNT"]},IMMERSIVE_MODAL_CLOSE_CLICK:{metricList:["M_IMMERSIVE_CLOSE_CLICK_COUNT"]},IMMODAL_VISIBLE_SCROLLBAR:{metricList:["M_IMMERSIVE_VISIBLE_SCROLL_COUNT"]},IMMODAL_FULL_SCROLL:{metricList:["M_IMMERSIVE_FULL_SCROLL_COUNT"]},HOVER:{metricList:["M_HOVER_COUNT","M_FIRST_HOVER"]},HOVER_OUT:[],CACHE_HIT:{metricList:["M_CACHE_HIT",
"M_CACHE_USED"]},CACHE_MISS:{metricList:["M_CACHE_MISS","M_CACHE_USED"]},PAGE_UNLOAD:{metricList:["M_CACHE_UNUSED","M_CACHE_HIT_RATIO","M_CACHE_USED_RATIO"]},REQ_DIM_CHANGED:{metricList:["M_OTHER_REQ_DIM_SELECTED_COUNT","M_REQ_DIM_CHANGE_COUNT"]},DIM_SUM_LOAD:{metricList:["M_DIM_SUM_LOAD"]},CLICK_NA:{metricList:["M_NA_CLICK_COUNT"]},DIM_INIT:{metricList:["M_DIM_PAGENATION_COUNT"]},SCROLL:{metricList:["M_VIEWED_DIM_COUNT"]},CLICK_VARIATION:{metricList:["M_DIM_CLICK_VIEWED_DIM_COUNT"]}};var f=function(e,
d){this.stringVal=d;this.initValue=NaN;this.deferLogging=!0;this.pagenationCountName=e;this.updateFunction=function(a){var e=Math.ceil(a[b.TWISTER_EVENT_DATA_PERCENTAGE]/25)*25,d=a[b.TWISTER_EVENT_DATA_DIV_METADATA][b.STRING_DIM_INDEX];if(!this.metrics)this.metrics={};this.metrics[d]||(this.metrics[d]={});if((this.metrics[d].percentage||0)<e)this.metrics[d].percentage=e;this.metrics[d].pageCount=a[b.TWISTER_EVENT_DATA_COUNT];this.metrics[d].dimDisplayType=a[b.TWISTER_EVENT_DATA_DISPLAY_TYPE];Twister.printConsoleLogs&&
console.log(this.stringVal+": index - "+d+" page - "+this.metrics[d].pageCount+" percentage - "+this.metrics[d].percentage)};this.getMetricData=function(){if(this.metrics){var b=[],e=this;a.each(this.metrics,function(a,c){var d=e.pagenationCountName+c.pageCount;c.dimDisplayType&&(d=c.dimDisplayType+":"+d);b.push({name:d+"_"+(e.stringVal+c.percentage),value:1})});return b}}},l={M_CACHE_HIT:{stringVal:"CacheHit",initValue:0,deferLogging:!0,updateFunction:function(){this.currentValue=this.currentValue>
0?this.currentValue+1:1;Twister.printConsoleLogs&&console.log("incrementing cacheHit count to "+this.currentValue)}},M_CACHE_MISS:{stringVal:"CacheMiss",initValue:0,deferLogging:!0,updateFunction:function(){this.currentValue=this.currentValue>0?this.currentValue+1:1}},M_CACHE_HIT_RATIO:{stringVal:"CacheHitRatio",initValue:NaN,deferLogging:!0,updateFunction:function(){var a=r.getMetricCurrentValue("M_CACHE_HIT"),b=r.getMetricCurrentValue("M_CACHE_MISS");if(a||b)this.currentValue=Math.round(a/(a+b)*
100)}},M_CACHE_USED:{stringVal:"CacheUsed",initValue:0,deferLogging:!0,updateFunction:function(a){if(!this.currentValue)this.currentValue=this.initValue,this.usedIdCache={};a=a.id;this.usedIdCache.hasOwnProperty(a)||(this.currentValue++,this.usedIdCache[a]=!0)}},M_CACHE_UNUSED:{stringVal:"CacheUnused",initValue:0,deferLogging:!0,updateFunction:function(){var a=d.twisterModel.pageRefresh.getModelCacheSize("full")-r.getMetricCurrentValue("M_CACHE_USED");this.currentValue=a<0?0:a}},M_CACHE_USED_RATIO:{stringVal:"CacheUsedRatio",
initValue:NaN,deferLogging:!0,updateFunction:function(){var a=r.getMetricCurrentValue("M_CACHE_USED"),b=r.getMetricCurrentValue("M_CACHE_UNUSED");if(a||b)this.currentValue=Math.round(a/(a+b)*100)}},M_FIRST_CLICK:{stringVal:"FirstClick",initValue:NaN,deferLogging:!0,updateFunction:function(a){if(!this.firstClickLogged)this.currentValue=i(a),Twister.printConsoleLogs&&console.log("first click = "+this.currentValue),this.firstClickLogged=!0}},M_CLICK_COUNT:{stringVal:"ClickCount",initValue:0,deferLogging:!1,
updateFunction:function(){this.currentValue=1;Twister.printConsoleLogs&&console.log("incrementing click count to "+this.currentValue)}},M_HOVER_COUNT:{stringVal:"HoverCount",initValue:0,deferLogging:!0,updateFunction:function(a){a=a.divMetaData;if(!this.lastHoveredDivMetaData||!a||!(this.lastHoveredDivMetaData.dimIndex===a.dimIndex&&this.lastHoveredDivMetaData.dimValueIndex===a.dimValueIndex))this.lastHoveredDivMetaData=a,this.currentValue=this.currentValue>0?this.currentValue+1:1,Twister.printConsoleLogs&&
console.log("incrementing hover count to "+this.currentValue)}},M_FIRST_HOVER:{stringVal:"FirstHover",initValue:NaN,deferLogging:!0,updateFunction:function(a){if(!this.firstHoverLogged)this.currentValue=i(a),Twister.printConsoleLogs&&console.log("first hover = "+this.currentValue),this.firstHoverLogged=!0}},M_OTHER_REQ_DIM_SELECTED_COUNT:{stringVal:"OtherReqDimSelectedCount",initValue:NaN,deferLogging:!0,updateFunction:function(a){var b=a.newReqDimValueIndex,a=a.oldReqDimValueIndex;if(b==="X"){if(!this.currentValue)this.lastReqDimValueIndex=
a,this.currentValue=0}else if(this.lastReqDimValueIndex!==b)this.lastReqDimValueIndex=b,!this.currentValue&&this.currentValue!==0?a==="X"?this.currentValue=0:this.currentValue=1:this.currentValue++,Twister.printConsoleLogs&&console.log("OtherReqDimSelectedCount incremented to : "+this.currentValue)}},M_REQ_DIM_CHANGE_COUNT:{stringVal:"ReqDimChangeCount",initValue:0,deferLogging:!0,updateFunction:function(){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("ReqDimChangeCount incremented to : "+
this.currentValue)):this.currentValue=1}},M_DIM_SUM_LOAD:{stringVal:"DimSumLoadingDuration",initValue:NaN,deferLogging:!1,updateFunction:function(a){this.currentValue=a[b.TWISTER_EVENT_DATA_DURATION];Twister.printConsoleLogs&&console.log("DimSumLoadingDuration: "+this.currentValue)}},M_NA_CLICK_COUNT:{stringVal:"NAClickCount",initValue:NaN,deferLogging:!0,updateFunction:function(){this.currentValue=(this.currentValue||0)+1;Twister.printConsoleLogs&&console.log("NAClick incremented to: "+this.currentValue)}},
M_DIM_PAGENATION_COUNT:{stringVal:"DimPageCount",initValue:1,deferLogging:!1,updateFunction:function(a){this.pageCount=a[b.TWISTER_EVENT_DATA_COUNT]||1;this.dimDisplayType=a[b.TWISTER_EVENT_DATA_DISPLAY_TYPE];Twister.printConsoleLogs&&console.log("DimPageCount: "+this.pageCount)},getMetricData:function(){var a=this.stringVal+(this.pageCount||1);this.dimDisplayType&&(a=this.dimDisplayType+":"+a);return{name:a,value:1}}},M_VIEWED_DIM_COUNT:new f("DimPageCount","ViewedVariationCount"),M_DIM_CLICK_VIEWED_DIM_COUNT:new f("DimPageCount",
"ViewedVariationCountBeforeClick"),IMMERSIVE_DROPDOWN_ROW_CLICK_COUNT:{stringVal:"ImmersiveDropdownRowClickCount",initValue:0,deferLogging:!1,updateFunction:function(){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immsersive Dropdown Row Click Count incremented to : "+this.currentValue)):this.currentValue=1}},IMMERSIVE_DROPDOWN_OPEN_COUNT:{stringVal:"ImmersiveDropdownOpenedCount",initValue:0,deferLogging:!1,updateFunction:function(){this.currentValue?(this.currentValue++,
Twister.printConsoleLogs&&console.log("Immsersive Dropdown Opened Count incremented to : "+this.currentValue)):this.currentValue=1}},IMMERSIVE_DROPDOWN_CLOSE_COUNT:{stringVal:"ImmersiveDropdownClosedCount",initValue:0,deferLogging:!1,updateFunction:function(){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immsersive Dropdown Closed Count incremented to : "+this.currentValue)):this.currentValue=1}},IMMERSIVE_DROPDOWN_VISIBLE_SCROLLBAR_COUNT:{stringVal:"ImmersiveDropdownScrollBarCount",
initValue:0,deferLogging:!1,updateFunction:function(){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immsersive Dropdown Visible Scroll Bar Count incremented to : "+this.currentValue)):this.currentValue=1}},IMMERSIVE_DROPDOWN_FULL_SCROLL_COUNT:{stringVal:"ImmersiveDropdownFullScrollCount",initValue:0,deferLogging:!1,updateFunction:function(){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immsersive Dropdown Full Scroll Count incremented to : "+
this.currentValue)):this.currentValue=1}},IMMERSIVE_DROPDOWN_SCROLL_COUNT:{stringVal:"ImmersiveDropdownScrollCount",initValue:0,deferLogging:!1,updateFunction:function(){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immsersive Dropdown Scroll Count incremented to : "+this.currentValue)):this.currentValue=1}},M_IMMERSIVE_CLICK_COUNT:{stringVal:"ImmersiveClickCount",initValue:0,deferLogging:!1,updateFunction:function(){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&
console.log("Immsersive Click Count incremented to : "+this.currentValue)):this.currentValue=1}},M_IMMERSIVE_SWATCH_CLICK_COUNT:{stringVal:"ImmersiveSwatchClickCount",initValue:0,deferLogging:!1,updateFunction:function(){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immersive swatch click Count incremented to : "+this.currentValue)):this.currentValue=1}},M_IMMERSIVE_CLOSE_CLICK_COUNT:{stringVal:"ImmersiveCloseClickCount",initValue:0,deferLogging:!1,updateFunction:function(){this.currentValue?
(this.currentValue++,Twister.printConsoleLogs&&console.log("Immersive modal close click count : "+this.currentValue)):this.currentValue=1}},M_IMMERSIVE_VISIBLE_SCROLL_COUNT:{stringVal:"ImmersiveScrollBarCount",initValue:0,deferLogging:!1,updateFunction:function(){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immersive modal scrollBar count : "+this.currentValue)):this.currentValue=1}},M_IMMERSIVE_FULL_SCROLL_COUNT:{stringVal:"ImmersiveFullScrollCount",initValue:0,deferLogging:!1,
updateFunction:function(){this.currentValue?(this.currentValue++,Twister.printConsoleLogs&&console.log("Immersive modal full scroll down count : "+this.currentValue)):this.currentValue=1}}};this.init=function(){e=o!==void 0?new k(a,this,o):new k(a,this);e.init()};this.logImpression=function(b,d){try{a.each(b.metricList,function(a,b){try{var c=l[b];c.updateFunction(d);l[b].deferLogging||e.logCounters(Array(q(c)))}catch(f){Twister.printConsoleLogs&&console.log("metricUpdate failing for metric = "+b)}})}catch(f){Twister.printConsoleLogs&&
console.log("logImpression failed")}};this.getDataToUploadOnUnload=function(){this.logImpression(this.eventTypes.PAGE_UNLOAD);var b=[];a.each(l,function(e,d){try{if(d.deferLogging){var f=q(d);f&&(a.isArray(f)?b=a.merge(f,b):b.push(f))}}catch(i){}});return b};this.getMetricCurrentValue=function(a){try{return l[a].hasOwnProperty("currentValue")?l[a].currentValue:l[a].initValue}catch(b){return l[a].initValue}}}});t.when("A").register("twister-availabilty-cache",function(){return function(n){function k(b,
o){var i=b+":"+o,q=b.split("_"),r=q.length,e=-1,f,l;if(a.asinToRenderCache[i]!==null&&a.asinToRenderCache[i]!==void 0)return a.asinToRenderCache[i];a.intermediateAsinToRenderCache[i]=!0;for(i=0;i<r;i++)if(q[i]==="X"){e=i;break}if(e===-1)return f=null,a.twisterVariationsData.dimToAsinMapData[b]!=null&&(f=a.twisterVariationsData.dimToAsinMapData[b]),f;for(var r=a.twisterVariationsData.dimensionValuesData[e].length,m=0;m<r;m++)if(q[e]=m,i=q.join("_"),l=i+":"+o,!a.intermediateAsinToRenderCache.hasOwnProperty(l)&&
(f=k(i,o),f!==null&&f!==void 0))break;return f}function b(b){for(var k in a.intermediateAsinToRenderCache)a.asinToRenderCache[k]=b,delete a.intermediateAsinToRenderCache[k];a.intermediateAsinToRenderCache={}}var a=this;a.twisterVariationsData=n;a.dimAvailabilityCache={};a.asinToRenderCache={};a.intermediateAsinToRenderCache={};a.isUpdateCacheReq=!1;a.isDimCombinationAvailable=function(b){var k=b.split("_"),i,q=-1,r,e;i=k.length;if(a.dimAvailabilityCache[b]!==null&&a.dimAvailabilityCache[b]!==void 0)return a.dimAvailabilityCache[b];
for(e=0;e<i;e++)if(k[e]==="X"){q=e;break}if(q===-1)return r=!1,a.twisterVariationsData.dimToAsinMapData[b]!==null&&a.twisterVariationsData.dimToAsinMapData[b]!==void 0&&(r=!0),a.dimAvailabilityCache[b]=r;i=a.twisterVariationsData.dimensionValuesData[q].length;for(var f=0;f<i;f++)if(k[q]=f,e=k.join("_"),a.dimAvailabilityCache[e]!==null&&a.dimAvailabilityCache[e]!==void 0?r=a.dimAvailabilityCache[e]:(r=a.isDimCombinationAvailable(e),a.dimAvailabilityCache[e]=r),r)break;return a.dimAvailabilityCache[b]=
r};a.gAsinToRender=function(d,o){var i=null,q,r,e=d.split("_"),f=e.length,l=d+":"+o;if(a.asinToRenderCache[l]!==null&&a.asinToRenderCache[l]!==void 0){if(a.isUpdateCacheReq)b(a.asinToRenderCache[l]),a.isUpdateCacheReq=!1;return a.asinToRenderCache[l]}if(!a.isUpdateCacheReq)a.isUpdateCacheReq=!0;a.intermediateAsinToRenderCache.hasOwnProperty(l)||(i=k(d,o));if(i!==null&&i!==void 0){if(a.isUpdateCacheReq)e[o]==="X"?(a.asinToRenderCache[l]=i,a.intermediateAsinToRenderCache={}):b(i),a.isUpdateCacheReq=
!1;return i}for(l=0;l<f;l++)if(!(l==o||e[l]=="X"))if(i=e[l],e[l]="X",q=e.join("_"),r=q+":"+o,e[l]=i,!a.intermediateAsinToRenderCache.hasOwnProperty(r)&&(i=k(q,o),i!==null&&i!==void 0)){if(a.isUpdateCacheReq)b(i),a.isUpdateCacheReq=!1;return i}i=-1;for(l=0;l<f;l++)if(e[l]!=="X"&&l!==o){i=l;break}if(i===-1)return"";e[i]="X";q=e.join("_");return a.gAsinToRender(q,o)}}});t.when("A","twister-modal","twister-string-constants","twister-logger").register("twister-dimension-views-ingress",function(n,k,b,a){return function(d,
o){var i=this,q=n.$;i.dimensionData=d;if(Twister.multiDimensionWeblabEnabled)var r="ImmersiveMultiDimensionView";else Twister.isImmersiveExperience&&(r="ImmersiveSwatchSingleDimensionView");i.logger=r!==void 0?new a(q,this,r):new a(q,this);i.logger.init();i.twisterJSInitData=o;i.modalHandle=new k(d,i.twisterJSInitData);i.ingressDiv="#"+b.TWISTER_INGRESS_ID_PREFIX+d.dimName;(function(){n.declarative(b.AUI_EVENT_FOR_INGRESS_PREFIX+d.dimOrder,[b.EVENT_TYPE_CLICK,b.EVENT_TYPE_TOUCHSTART],function(a){a.type===
b.EVENT_TYPE_CLICK&&(i.logger.logImpression(i.logger.eventTypes.IMMERSIVE_OPTION_CLICK,null),i.modalHandle.openTwisterModal())});q(document).ready(function(){q(document).click(function(a){var d=i.modalHandle.twisterModalDiv;q("#"+b.TWISTER_FEATURE_DIV_ID);a.target.id!=d.attr("id")&&!d.has(a.target).length&&a.target.id!=q(i.ingressDiv).attr("id")&&!q(i.ingressDiv).has(a.target).length&&i.modalHandle.closeTwisterModal()})})})()}});t.when("A","twister-utils","scroll-event-handler","twister-modal-resize-helper",
"twister-string-constants","twister-logger").register("twister-modal",function(n,k,b,a,d,o){window.MAX_AJAX_CONNECTIONS_ALLOWED=2;return function(b,q){function r(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}function e(){n.declarative(d.AUI_EVENT_CLOSE_MODAL_PREFIX+b.dimName,[d.EVENT_TYPE_CLICK,d.EVENT_TYPE_TOUCHSTART],function(a){a.type===d.EVENT_TYPE_CLICK&&(c.logger.logImpression(c.logger.eventTypes.IMMERSIVE_MODAL_CLOSE_CLICK,null),c.closeTwisterModal())});
p(document).keyup(function(a){a.keyCode==27&&c.closeTwisterModal()});c.twisterModalContentDiv.bind("scroll",function(){p(this).scrollTop()+p(this).innerHeight()>=this.scrollHeight?(c.logger.logImpression(c.logger.eventTypes.IMMODAL_FULL_SCROLL,null),p(d.ID_SELECTOR+c.twisterModalDivId+" ."+d.CLASSNAME_FOR_STYLERBOTTOM).css("display","none")):(p(this).scrollTop()==0?p(d.ID_SELECTOR+c.twisterModalDivId+" ."+d.CLASSNAME_FOR_STYLERTOP).css("display","none"):p(d.ID_SELECTOR+c.twisterModalDivId+" ."+d.CLASSNAME_FOR_STYLERTOP).css("display",
"block"),p(d.ID_SELECTOR+c.twisterModalDivId+" ."+d.CLASSNAME_FOR_STYLERBOTTOM).css("display","block"))});c.twisterModalContentDiv.live("DOMMouseScroll mousewheel  wheel",function(a){var b=p(this),e=this.scrollTop,f=this.scrollHeight,g=b.height(),i=a.originalEvent.wheelDelta;typeof i=="undefined"&&(i=-a.originalEvent.deltaY);var h=i>0,k=function(){a.stopPropagation();a.preventDefault();return a.returnValue=!1};if(!h&&-i>f-g-e)return b.scrollTop(f),p(d.ID_SELECTOR+c.twisterModalDivId+" ."+d.CLASSNAME_FOR_STYLERBOTTOM).css("display",
"none"),k();else if(h&&i>e)return p(d.ID_SELECTOR+c.twisterModalDivId+" ."+d.CLASSNAME_FOR_STYLERTOP).css("display","none"),b.scrollTop(0),k();else p(d.ID_SELECTOR+c.twisterModalDivId+" ."+d.CLASSNAME_FOR_STYLERBOTTOM).css("display","block"),p(d.ID_SELECTOR+c.twisterModalDivId+" ."+d.CLASSNAME_FOR_STYLERTOP).css("display","block")})}function f(){return k.isPartialState(c.dimensions.length)}function l(){var a=d.AUI_EVENT_VISIBILITY_PREFIX+c.dimName;p(d.ID_SELECTOR+c.twisterModalDivId+" .swatches li").appearedInTwisterImmersiveView({force_process:!0,
$window:c.twisterModalDiv,$scrollHandlerDiv:c.twisterModalContentDiv,eventToBeTriggered:a,blockIsAppear:f});n.on(a,function(a){for(a=a[0].slice(0);a.length;)c.requestStack.push(a.splice(0,c.maxSwatchLimitForImmersive));m()})}function m(){if(!(c.requestStack.length<=0)&&c.noOfOngoingConnections!==MAX_AJAX_CONNECTIONS_ALLOWED){c.noOfOngoingConnections++;for(var a=c.requestStack.shift(),b=[],e=0,d=a.length;e<d;e++){var f=p(a[e]).find(".a-declarative"),g=f.attr("data-action"),f=JSON.parse(f.attr("data-"+
g)).dimValueIndex;b.push(f)}w(b);m()}}function h(a){if(c.initData.fnToDetermineSelectedVariations){if(typeof c.initData.fnToDetermineSelectedVariations==="function")c.currentDimCombOnGlance=c.initData.fnToDetermineSelectedVariations.call(c)}else c.glanceViewSelectedDims=DetailPage.StateController.getState().selected_variations,c.currentDimCombOnGlance=DetailPage.StateController.getState().currentDimCombID;return a?c.currentDimCombOnGlance.split("_"):c.currentDimCombOnGlance}function g(a){var b=h(!0);
b[a]=c.symbolForTriggeringDim;var b=b.join("_"),e={},d={},a=dimensionValuesList[a];if(!c.mapOfDimToAsinMaps[b]){for(var f=0,g=a.length;f<g;f++){var i=b.replace(c.symbolForTriggeringDim,f);(i=dimensionToAsinMap[i])?(e[a[f]]=i,d[i]=a[f]):e[a[f]]=""}e&&(c.mapOfDimToAsinMaps[b]=e);d&&(c.mapOfAsinToDimMaps[b]=d)}}function t(a,b){var e=[],d;d=h(!0).slice(0);d[b]=c.symbolForTriggeringDim;d=d.join("_");d=c.mapOfDimToAsinMaps[d];for(var f=dimensionValuesList[b],g=0,i=a.length;g<=i;g++){var k=a[g],l=f[k];l&&
((l=d[l])?e.push(l):(k=p(".twister_"+c.dimName+"_"+k+" .twisterSlotDiv"),k.html("<span class='a-color-tertiary'>- -</span>"),k.css("display","")))}return e}function w(a){var b={};b.indices=a;b.dimTriggeringDimSum=c.dimensionData.dimName;b.dimSubType=c.dimSubType;var e=dimensionsList.indexOf(b.dimTriggeringDimSum);g(e);b.asinList=t(a,e,b);b.asinList.length==0?(c.noOfOngoingConnections--,m()):(b.dimCombId=h(!1),b.executeChunk=function(){var a=DetailPage.StateController.getState().currentDimCombID,e=
a.split("_"),d=b.dimCombId.split("_");if(b.dimCombId===a)return!0;else if(!k.isPartialState(c.dimensions.length)){for(var a=c.dimensions.length,f=!0,g=0;g<a;g++)if(g!==parseInt(c.dimOrder)&&d[g]!==e[g]){f=!1;break}return f}return!1},b.chunk=function(a,b){a.dimensionValue=dimensionsList[b.dimIndexTriggeringDimSum]+"_"+dimensionValuesList[b.dimIndexTriggeringDimSum].indexOf(c.mapOfAsinToDimMaps[b.hashKey][a.ASIN]);var e=p(".twister_"+a.dimensionValue+" .twisterSlotDiv");e.css("display","");if(Twister.multiDimensionWeblabEnabled){for(var d=
"",f=0;a.Value.content.twisterSlotDiv[f];)c.dimSubType==="IMAGE"&&(d+="<div>"),d+=a.Value.content.twisterSlotDiv[f],c.dimSubType==="IMAGE"&&(d+="</div>"),f++;e.html(d)}else e.html(a.Value.content.twisterSlotDiv)},b.success=function(){var a=r();a&&a<c.slotsEligibleWidth?c.resizeHelperHandle.fixSize(c.$twisterModalSwatches,c.swatchWrapper,c.swatchDynaWrapper,c.ingressWrapper,c):c.resizeHelperHandle.fixSize(c.$swatches,c.swatchWrapper,c.swatchDynaWrapper,c.ingressWrapper,c);c.noOfOngoingConnections--;
m()},b.error=function(){c.noOfOngoingConnections--;m()},b.abort=function(){c.noOfOngoingConnections--;m()},Twister.dimensionalSummaryModule.fetchDimSumData(b))}var c=this,p=n.$;c.dimensionData=b;c.dimOrder=c.dimensionData.dimOrder;c.centerColDivId=d.ID_SELECTOR+d.CENTER_COL_DIV_ID;c.centerColDiv=p(c.centerColDivId);c.twisterModalDivId=d.TWISTER_MODAL_ID_PREFIX+c.dimensionData.dimName;c.twisterModalDiv=p(d.ID_SELECTOR+c.twisterModalDivId);c.variationsPrefix="variation_";c.swatchWrapperClassForAnimation=
"twisterSwatchWrapper";c.swatchWrapper=".twisterSwatchWrapper_"+c.dimOrder;c.swatchDynaWrapper="twisterSwatchWrapperDynaStyle_"+c.dimOrder;c.ingressWrapper="twisterIngressWrapper_"+c.dimOrder;c.glanceSwatchContainer=d.ID_SELECTOR+c.variationsPrefix+c.dimensionData.dimName;c.twisterModalContentDiv=p(d.ID_SELECTOR+d.MODAL_CONTENTDIV_PREFIX+c.dimensionData.dimName);c.twisterModalHeaderDiv=p(d.ID_SELECTOR+d.MODAL_HEADER_PREFIX+c.dimensionData.dimName);c.twisterFeatureDiv=p(d.ID_SELECTOR+d.TWISTER_FEATURE_DIV_ID);
c.$swatches=p(c.swatchWrapper);c.$twisterModalSwatches=p(".twisterModal "+c.swatchWrapper);c.$subNav=p(d.ID_SELECTOR+"nav-subnav");c.requestStack=[];c.noOfOngoingConnections=0;c.isModalOpen=0;c.isSlotRowPopulated=!1;c.showModalFadeDuration=500;c.isIE8=p("html").hasClass("a-lt-ie9");c.slotsEligibleWidth=1100;c.windowWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;c.logger=new o(p,this,Twister.multiDimensionWeblabEnabled?"ImmersiveMultiDimensionView":"ImmersiveSwatchSingleDimensionView");
c.logger.init();c.twisterJSInitData=q;c.symbolForTriggeringDim="*";c.currentDimCombOnGlance="";c.mapOfDimToAsinMaps={};c.mapOfAsinToDimMaps={};c.dimName=c.dimensionData.dimName;c.dimValuesDisplayData=c.dimensionData.dimValuesDisplayData;c.noOfDimValues=c.dimValuesDisplayData.length;c.maxSwatchLimitForImmersive=c.dimensionData.maxSwatchLimitForImmersive;c.dimSubType=c.dimensionData.dimSubType;c.dimensions=c.twisterJSInitData.dimensions;dimensionValuesList=c.twisterJSInitData.dimensionValuesData;dimensionDisplayLabels=
c.twisterJSInitData.dimensionsDisplay;dimensionToAsinMap=c.twisterJSInitData.dimToAsinMapData;asinToDimIndexMapData=c.twisterJSInitData.asinToDimIndexMapData;dimensionsList=c.twisterJSInitData.dimensions;c.initData={};c.initData.scopeSuffix="twister";c.symbolForTriggeringDim="*";c.resizeHelperHandle=new a;c.closeTwisterModal=function(){if(c.isModalOpen)k.enableTwisterDiv(),c.isIE8?c.twisterModalDiv.css("display","none"):c.twisterModalDiv.fadeOut(c.showModalFadeDuration),c.isModalOpen=0};c.openTwisterModal=
function(){if(c.twisterModalDiv.parent().attr("id")!=="centerCol")p(c.centerColDivId+" > hr").first().after(c.twisterModalDiv),e(),b.isSlotsEnabled&&l();else{var a=d.AUI_EVENT_VISIBILITY_PREFIX+c.dimName;p(d.ID_SELECTOR+c.twisterModalDivId+" .swatches li").forceAppear({force_process:!0,$window:c.twisterModalDiv,$scrollHandlerDiv:c.twisterModalContentDiv,eventToBeTriggered:a,blockIsAppear:f})}var a=document.getElementById("twister").querySelectorAll(c.swatchWrapper),g=a.length,h=r();if(h&&h<c.slotsEligibleWidth)for(h=
0;h<g;h++)p(a[h]).removeClass(d.CLASSNAME_FOR_THIN_WIDTH_OVERRIDE);c.twisterModalDiv.css("display","block");a=c.twisterModalDiv.css("transition-duration");c.$twisterModalSwatches.removeClass(c.swatchWrapperClassForAnimation);a!=void 0&&c.twisterModalDiv.css("transition-duration","0s");c.resizeHelperHandle.fixSize(c.$swatches,c.swatchWrapper,c.swatchDynaWrapper,c.ingressWrapper);c.twisterModalDiv.css({"z-index":"1001"});for(var m=p(c.glanceSwatchContainer+" li"),g=m.first()[0].getBoundingClientRect(),
h=g.left,j=g.top,o=0,q=1,m=m.length;q<m;q++){var n;n=p(c.glanceSwatchContainer+" li:eq("+q+")")[0].getBoundingClientRect();if(Math.abs(j-n.top)>5)break;else o=n.right}h=o>0?o-h+55:g.right-h+55;c.setModalWidth(h);c.twisterModalContentDiv.css({"max-height":"420px"});g=p(".twisterModal_innerDiv ul").outerHeight()>p(".twisterModal_innerDiv").outerHeight()+15;navigator.platform.indexOf("Win")>-1&&g&&(h=parseInt(h)+25+"px",c.twisterModalDiv.css("width",h));g&&c.logger.logImpression(c.logger.eventTypes.IMMODAL_VISIBLE_SCROLLBAR,
null);g=document.getElementById("twister").querySelectorAll(c.swatchWrapper);h=g.length;if((j=r())&&j<c.slotsEligibleWidth)for(j=0;j<h;j++)p(g[j]).addClass(d.CLASSNAME_FOR_THIN_WIDTH_OVERRIDE);c.twisterModalDiv.offset();c.twisterModalDiv.outerHeight();if(p(window).height()>500)c.isIE8?(j=c.twisterModalDiv.offset().top+document.documentElement.scrollTop+c.twisterModalDiv.outerHeight(),h=c.twisterModalDiv.offset().top+document.documentElement.scrollTop,g=c.$subNav.offset().top+document.documentElement.scrollTop+
c.$subNav.outerHeight()):(j=c.twisterModalDiv.offset().top+c.twisterModalDiv.outerHeight(),h=c.twisterModalDiv.offset().top,g=c.$subNav.offset().top+c.$subNav.outerHeight()),j>p(window).height()&&(j-=p(window).height(),h=h-j-30,j>0&&(h>g?c.twisterModalDiv.offset({top:h}):c.twisterModalDiv.offset({top:g+20})));j=c.glanceSwatchContainer+" ."+c.ingressWrapper+":first";g="#"+c.twisterModalDivId+":first";c.isIE8?(offSetTopIngress=p(j).offset().top+document.documentElement.scrollTop,offSetTopModal=p(g).offset().top+
document.documentElement.scrollTop):(offSetTopIngress=p(j).offset().top,offSetTopModal=p(g).offset().top);h=p(g).outerHeight();j=p(j).outerHeight();h=offSetTopIngress+j-(offSetTopModal+h);h>0&&(h+=offSetTopModal,p(g).offset({top:h}));k.disableTwisterDiv();c.twisterModalContentDiv.get(0).scrollHeight>c.twisterModalContentDiv.get(0).clientHeight?p(d.ID_SELECTOR+c.twisterModalDivId+" ."+d.CLASSNAME_FOR_STYLERBOTTOM).css("display","block"):p(d.ID_SELECTOR+c.twisterModalDivId+" ."+d.CLASSNAME_FOR_STYLERBOTTOM).css("display",
"none");c.twisterModalDiv.css("display","none");a!=void 0&&(c.$twisterModalSwatches.addClass(c.swatchWrapperClassForAnimation),c.twisterModalDiv.css("transition-duration",a));c.twisterModalDiv.fadeIn(c.showModalFadeDuration);c.isModalOpen=1};c.setModalWidth=function(a){var b=c.twisterFeatureDiv.css("width"),a=parseInt(a);c.twisterModalDiv.css({width:a?a+"px":b});b=a?a:b;b-=30;p(d.ID_SELECTOR+c.twisterModalDivId+" ."+d.CLASSNAME_FOR_STYLERBOTTOM).css("width",b+"px");p(d.ID_SELECTOR+c.twisterModalDivId+
" ."+d.CLASSNAME_FOR_STYLERTOP).css("width",b+"px")}}});t.when("A","twister-string-constants").register("twister-utils",function(n,k){var b=n.$,a=this,d={};a.windowWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;a.immersiveTwisterOverlay=b("#"+k.TWISTER_FEATURE_DIV_ID+" #"+k.IMMERSIVE_TWISTER_OVERLAY);a.twisterFeatureDiv=b("#"+k.TWISTER_FEATURE_DIV_ID);(function(){for(var a="Array Object String Date RegExp Function Boolean Number Null Undefined".split(" "),
b=0,k=a.length;b<k;b++)d["is"+a[b]]=function(a){return function(b){return Object.prototype.toString.call(b).slice(8,-1)===a}}(a[b])})();return{enableTwisterDiv:function(){a.immersiveTwisterOverlay.css({opacity:"0",position:"absolute",width:"0px",height:"0px"})},disableTwisterDiv:function(){var b=a.twisterFeatureDiv.get(0).clientWidth,d=a.twisterFeatureDiv.get(0).clientHeight;a.immersiveTwisterOverlay.css({opacity:"0.8",position:"absolute",width:b,height:d,"background-color":"white","z-index":10})},
isSwatchSelected:function(a,b){var d=Twister.isImmersiveExperience?"."+k.TWISTER_SWATCH_CLASS_PREFIX+b.dimensionsMap[a[k.STRING_DIM_INDEX]]+"_"+a[k.STRING_DIM_VALUE_INDEX]:"#"+b.dimensionsMap[a[k.STRING_DIM_INDEX]]+"_"+a[k.STRING_DIM_VALUE_INDEX],r=[],e;if(n.$(d).is("li")){r=n.$(d);Twister.isImmersiveExperience&&!(r.length>0)&&(r=n.$("."+k.TWISTER_SWATCH_CLASS_PREFIX+b.dimensionsMap[a[k.STRING_DIM_INDEX]]+"_"+a[k.STRING_DIM_VALUE_INDEX]));for(var r=r.get(0).className.split(" "),d=0,f=r.length;d<f;d++){var l=
r[d];if(l.indexOf("swatch")===0){e=l;break}}(e===k.CLASS_FOR_SWATCH_UNAVAILABLE_HOVER||e===k.CLASS_FOR_SWATCH_UNAVAILABLE)&&n.$("#twisterPopover.twisterPopoverSkin").hide();return e===k.CLASS_FOR_SWATCH_SELECT}else return!1},isPartialState:function(a){for(var b=DetailPage.StateController.getState().currentDimCombID.split("_"),d=!1,k=0;k<a;k++)if(b[k]==="X"){d=!0;break}return d},getImmersivePartialStateBannerContent:function(a,b){for(var d="",n=Twister.immersivePartialStateMessage,e=a.dimensionSelectionData,
f=a.dimensionsDisplay,l=0;l<e.length;l++)l!==b&&e[l][k.STRING_IS_SELECTED]===0&&(d=d?d+", "+f[l]:f[l]);return n.replace("dimName",d)},getImmersiveFullStateBannerContent:function(a,b){for(var d="",n=Twister.immersiveFullySelectedStateMessage,e=a.dimensionSelectionData,f=a.dimensions,l=a.dimensionsDisplay,m=DetailPage.StateController.getState().selected_variations,h=0;h<e.length;h++)h!==b&&e[h][k.STRING_IS_SELECTED]===1&&(d=d?d+", "+l[h]+" "+m[f[h]]:l[h]+" "+m[f[h]]);return n.replace("dimName",d)},
isSmallerWidthScreen:function(){return a.windowWidth<1100?1:0},getAttachedClass:function(a,d){var q=a[k.STRING_DIM_VALUE_INDEX],r="#"+d+"_"+q;if(n.$(r).is("li")){var e=[],f,e=n.$(r);Twister.isImmersiveExperience&&!(e.length>0)&&(e=b("."+k.TWISTER_SWATCH_CLASS_PREFIX+d+"_"+q));e=e.get(0).className.split(" ");q=0;for(r=e.length;q<r;q++){var l=e[q];if(l.indexOf("swatch")===0){f=l;break}}return f}else return r=Twister.isImmersiveExperience?k.IMMERSIVE_DROPDOWN_ROW_PREFIX+d+"_"+q:k.NATIVE_DROPDOWN_DIV_PREFIX+
d+"_"+q,n.$(r).attr("class")},htmlUnescape:function(a){return String(a).replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},getDimStyleData:function(a,b,d,n,e){for(var a=a.split("_"),f=[],l=a.slice(0),m,h,g=0;g<b;g++)h={},a[d]===g.toString()?m=k.STYLE_CLASS_TYPE_FOR_SELECTED:(l[d]=g,m=l.join("_"),m=(m=n.isDimCombinationAvailable(m))?k.STYLE_CLASS_TYPE_FOR_AVAILABLE:k.STYLE_CLASS_TYPE_FOR_INAVLID),m=e[m],h.style=m,f[g]=h;return f},getVisibleTableRows:function(a,
d){var k=[],n=a.getBoundingClientRect();d||(d=b(a).find("tr"));if(d.length)for(var e=0;e<d.length;e++){var f=d.get(e),l=f.getBoundingClientRect(),m=(l.bottom-l.top)/2,h=n.bottom+m;n.top-m<l.top&&h>l.bottom&&k.push(f);if(n.bottom<l.top)break}return k},reconstructCombinationWithDimValue:function(a,b,d){if(!a)return a;var n=a.split(k.CHAR_UNDERSCORE);if(b>=n.length)return a;n[b]=d;return n.join(k.CHAR_UNDERSCORE)},isTouchDevice:function(){return n.capabilities.touch},typeChecker:d,getQueryParams:function(a){var a=
a===void 0?{}:a,d={},k=decodeURIComponent(window.location.href).match(/^.*?\?(.*?)(#.*)?$/);if(k===null||k.length<2||k[1]===void 0)return{};k=k[1].split("&");b.each(k,function(b,e){var f=e.split("=");f.length<2||a.hasOwnProperty(f[0])||(d[f[0]]=f[1])});return d}}});t.when("A").register("twister-string-constants",function(){return{YES:"YES",NO:"NO",MTYPE_PARENT:"parent",MTYPE_PARTIAL:"partial",MTYPE_FULL:"full",MTYPE_MASTER:"master",AUI_DROPDOWN_EVENT_PREFIX:"a:dropdown:selected:",AUI_EVENT_FOR_SWATCHTHUMB:"swatchthumb-action",
CHAR_SEMICOLON:":",CHAR_UNDERSCORE:"_",CLASS_FOR_DROPDOWN_UNAVAILABLE:"dropdownUnavailable",CLASS_FOR_NEW_TWISTER_EVDD:"#newTwisterEVDD",CLASS_FOR_NON_JS_EVDD:"#nonJSEVDD",CLASS_FOR_SWATCH_AVAILABLE:"swatchAvailable",CLASS_FOR_SWATCH_HOVER:"swatchHover",CLASS_FOR_SWATCH_SELECT:"swatchSelect",CLASS_FOR_SWATCH_UNAVAILABLE:"swatchUnavailable",CLASS_FOR_SWATCH_UNAVAILABLE_HOVER:"swatchUnavailableHover",CLASS_FOR_VODD_AVAILABLE:"voddAvailable",CLASS_FOR_VODD_HOVER:"voddHover",CLASS_FOR_VODD_SELECT:"voddSelect",
CLASS_FOR_VODD_UNAVAILABLE:"voddUnavailable",CLASS_NAME_FOR_SELCTED_DROPDOWN_OPTION:"dropdownSelect",DROPDOWN_DIV_NAME:"dropdown_selected_",EVENT_TYPE_SHOWPOPOVER:"showPopover",EVENT_TYPE_HIDEPOPOVER:"hidePopover",EVENT_TYPE_UPDATEPOPOVERPOSITION:"updatePopoverPosition",EVENT_TYPE_DROPDOWN_CHANGE:"dropdownChange",EVENT_TYPE_CLICK:"click",EVENT_TYPE_MOUSEENTER:"mouseenter",EVENT_TYPE_MOUSELEAVE:"mouseleave",EVENT_TYPE_MOUSEDOWN:"mousedown",EVENT_TYPE_MOUSEOUT:"mouseOut",EVENT_TYPE_MOUSEOVER:"mouseOver",
EVENT_TYPE_TOUCHSTART:"touchstart",EVENT_TYPE_TOUCHEND:"touchend",ID_SELECTOR:"#",TWISTER_POPOVER:"twisterPopover",INDEX_FOR_SELECT_OPTION:"-1",INIT_DATA_ASIN_TO_DIM_INDEX_MAP:"asinToDimIndexMapData",INIT_DATA_DELETED_LANDING_ASIN_INFO:"deletedLandingAsinInfo",INIT_DATA_DIM_TO_ASIN_MAP:"dimToAsinMapData",INIT_DATA_DIMENSION_VALUES_DISPLAY_DATA:"dimensionValuesDisplayData",INIT_DATA_DIMENSIONS_DISPLAY:"dimensionsDisplay",INIT_DATA_DIMENSIONS_DISPLAY_TYPE_MAP:"dimensionsDisplayType",INIT_DATA_DIMENSIONS_MAP:"dimensions",
INIT_DATA_VARIATIONS_DISPLAY_LABELS:"variationDisplayLabels",INIT_DATA_MAX_POPOVER_HEIGHT:"maxPopoverHeight",INIT_DATA_VISIBLE_ROW_COUNT:"visibleRowCount",INIT_DATA_POPOVER_POSITION:"popoverPosition",INIT_DATA_ANIMATE_BUTTON_CONTENT:"animateButtonContent",INIT_DATA_DISPLAY_TYPE_PROPERTIES:"displayTypeProperties",NATIVE_DROPDOWN_DIV_PREFIX:"#native_",STRING_CSS_CLASS:"css_class",STRING_DIM_COMB_ID:"dimCombID",STRING_DIM_DATA:"dimData",STRING_DIM_INDEX:"dimIndex",STRING_DIM_NAME:"dimName",STRING_DIM_ORDER:"dimOrder",
STRING_DIM_VALUE_INDEX:"dimValueIndex",STRING_DIMENSION_DISPLAY_MAP:"dimensionDisplayMap",STRING_DIMENSION_DISPLAY_STRING:"dimensionDisplayString",STRING_DIMENSION_SELECTION_DATA:"dimensionSelectionData",STRING_DIMENSION_VALUES_DATA:"dimensionValuesData",STRING_DIMENSION_VALUES_DATA_GLOBAL:"dimensionValuesDataGlobal",STRING_DIMENSIONS_MAP:"dimensionsMap",STRING_DISPLAY_CONFIG_STYLES_DATA:"displayConfigStylesData",STRING_EVENT_DATA:"eventData",STRING_EVENT_DIM_DATA:"dimData",STRING_EVENT_DIM_INFO:"eventDimInfo",
STRING_EVENT_DIV_METADATA:"divMetaData",STRING_EVENT_POPOVER_DATA:"popoverData",STRING_EVENT_TYPE:"eventType",STRING_HIDE_POPOVER:"hidePopover",STRING_HOVER_MS:"hoverMS",STRING_IS_REQUIRED:"isRequired",STRING_IS_SELECTED:"isSelected",STRING_NATIVE_CSS_CLASS:"native_css_class",STRING_SHOW_DIM_SECOND_UNAVAILABLE_POPOVER:"showDimSecondUnavailablePopover",STRING_STYLE:"style",STRING_TWISTER_CONTROLLER_HANDLE:"twisterControllerHandle",STRING_TWISTER_INITIAL_STATE_KEY:"twisterInitialState",STRING_UNAVAILABLE_POPOVER_STRING_VALUE:"unavailablePopOverStringValue",
STRING_USE_MS:"useMS",STYLE_CLASS_TYPE_FOR_AVAILABLE:"available",STYLE_CLASS_TYPE_FOR_INAVLID:"invalid",STYLE_CLASS_TYPE_FOR_SELECTED:"selected",TWISTER_DIMENSION_VIEW_DROPDOWN:"dropdown",TWISTER_DIMENSION_VIEW_EVDD:"etdd",TWISTER_DIMENSION_VIEW_SINGLETON:"singleton",TWISTER_DIMENSION_VIEW_SWATCH:"swatch",TWISTER_DIMENSION_VIEW_VODD:"vodd",TWISTER_DIMENSION_VIEW_COUNTER:"counter",TWISTER_EVENT_DATA_DIV_METADATA:"divMetaData",TWISTER_EVENT_DATA_DISPLAY_TYPE:"dimDisplayType",TWISTER_EVENT_DATA_TIME:"time",
TWISTER_EVENT_DATA_DURATION:"duration",TWISTER_EVENT_DATA_COUNT:"count",TWISTER_EVENT_DATA_PERCENTAGE:"percentage",TWISTER_EVENT_DATA_DIM_INDEX:"dimIndex",MODAL_SWATCH_PREFIX:"modal_",STRING_MAX_SWATCHES_IMMERSIVE_VIEW:"maxSwatchesForImmersiveView",TWISTER_SWATCH_CLASS_PREFIX:"twister_",PRICE_SLOT_CLASS_NAME:"twister_swatch_price",CLASS_FOR_PRICE_SECONDARY:"a-color-secondary",CLASS_FOR_PRICE_SELECTED:"a-color-price",TWISTER_MODAL_ID_PREFIX:"twister_modal_",TWISTER_INGRESS_ID_PREFIX:"twister_ingress_",
AUI_EVENT_FOR_INGRESS_PREFIX:"twister-ingress-click-",TWISTER_FEATURE_DIV_ID:"twister_feature_div",IMMERSIVE_TWISTER_OVERLAY:"immersiveTwisterOverlay",CENTER_COL_DIV_ID:"centerCol",MODAL_CONTENTDIV_PREFIX:"twister_modal_innerDiv_",MODAL_HEADER_PREFIX:"twister_modal_header_",IMMERSIVE_DROPDOWN_ROW_PREFIX:"twister_idd_",DYNAMIC_STYLE_RULES_ID:"twisterSwatchWrapperDynaStyle",CLASSNAME_FOR_STYLERBOTTOM:"twisterModal_stylerBottom",CLASSNAME_FOR_STYLERTOP:"twisterModal_stylerTop",CLASSNAME_FOR_SWATCH:"twisterSwatchWrapper",
CLASSNAME_FOR_INGRESS:"twisterIngressWrapper",AUI_EVENT_CLOSE_MODAL_PREFIX:"close-twisterModal-",AUI_EVENT_VISIBILITY_PREFIX:"twister-appear-",CLASSNAME_FOR_THIN_WIDTH_OVERRIDE:"thinWidthOverride",AUI_EVENT_FOR_COUNTER:"twister_counter-action",EXPANDED_VIEW_ENABLED:"expandedViewEnabled",MIN_ASINS_FOR_EXPANDED_VIEW:"minAsinForExpandedView",MIN_ASINS_FOR_EXPANDED_SCROLL:"minAsinForExpandedScroll"}});t.when("A").register("twister-thumbnailModule",function(n){var k=n.$;return{attach:function(b){var a=
k("#dropdown_selected_thumbnail_"+b),b=k("#dropdown_selected_"+b+" .a-button-inner");a.length>0&&b.length>0&&(a.detach(),b.append(a),a.attr("src")!=="#"&&a.show())},update:function(b){var a=k("#native_dropdown_selected_"+b).val().split(",")[0];typeof a!=="undefined"&&a!=="-1"&&(a=k("#native_"+b+"_"+a),a=a.length>0?a.attr("data-a-image-source"):"",b=k("#dropdown_selected_thumbnail_"+b),b.length>0&&a!==""?(b.attr("src",a),b.show()):b.hide())},preloadAllThumbnails:function(b){if(b){var a=k("#native_dropdown_selected_"+
b+" option"),b=k("#dropdown_selected_"+b).attr("data-a-class");a&&b&&b.indexOf("twister-image-dropdown")!==-1&&k.each(a,function(a,b){var i=b.getAttribute("data-a-image-source");if(i)(new Image).src=i})}}}});t.when("A","twister-string-constants","scroll-event-handler").execute(function(n,k,b){(function(a){function d(b){function d(f,h){var i=a(h).get(0).getBoundingClientRect(),c=b.$window.get(0).getBoundingClientRect(),k=c.right-c.left,l=c.bottom-c.top;return c.top<i.top&&i.top<c.top+l&&c.left<i.left&&
i.left<c.left+k}q=!1;for(var k=0,m=b.selector.length;k<m;k++){var h=[];if(b.blockIsAppear===void 0||!b.blockIsAppear())h=a(b.selector[k]).filter(function(){return a(this).is(d)}).not(i);h.length>0&&(n.trigger(b.eventToBeTriggered,[h.clone()]),i=i.add(h))}}var k=[],i=a(),q=!1,r={interval:250,force_process:!1};a.fn.extend({appearedInTwisterImmersiveView:function(e){var f=a.extend({},r,e||{}),i=this.selector||this;f.selector=[];f.selector[0]=i;var m=function(){q||(q=!0,setTimeout(function(){d(f)},f.interval))};
new b(200,e.$scrollHandlerDiv,m);e.$window.resize(m);f.force_process&&setTimeout(function(){d(f)},f.interval);k.push(i);return a(i)},forceAppear:function(b){var f=a.extend({},r,b||{}),b=this.selector||this;f.selector=[];f.selector[0]=b;setTimeout(function(){d(f)},f.interval)},invalidateAppearedAlreadyCache:function(){i=i.not(this.selector)}})})(n.$)});t.when("A","legacy-popover").register("twister-legacy-popover",function(n,k){return k});t.when("A","twister-utils","twister-string-constants").register("twister-counter",
function(n,k,b){return function(a,d){function k(a,b){var d=l(u+b);a?d.addClass(c):d.removeClass(c)}function i(){v.height();v.animate({height:m},{duration:g,queue:!1,complete:function(){v.css("overflow","hidden")}});v.animate({scrollTop:0},{duration:g,queue:!1});e(!0);r(!0)}function q(){var a=v.height();r(!1);e(!1);if(B>=j)v.height(a).animate({height:h},{duration:g,queue:!1,complete:function(){v.css("overflow","auto")}}),a=cur_selected.offset().top-v.offset().top,a>h&&v.animate({scrollTop:a},{duration:g,
queue:!1});else{var b=v.css("height","auto").height();v.height(a).animate({height:b},g)}}function r(a){a&&f.currDimCombID>=s?(f.currDimCombID==s?(z.removeClass(p),A=C):A=f.currDimCombID==s+1?t:l(u+(f.currDimCombID-1)),cur_selected.insertBefore(t),C.addClass(p)):!a&&C.hasClass(p)&&(C.removeClass(p),t.prev().insertAfter(A))}function e(a){a?(w.addClass(p),z.addClass(p),t.removeClass(p)):(t.addClass(p),z.removeClass(p),w.removeClass(p))}var f=this,l=n.$,m=55,h=155,g=500,t=l(b.ID_SELECTOR+"expanderButton"),
w=l(b.ID_SELECTOR+"collapseButton"),c="hoverSwatch",p="aok-hidden",x,u,v,F,j,s,z,C,B,A;f.updateView=function(a){a[b.STRING_EVENT_TYPE]===b.EVENT_TYPE_CLICK&&(a=a[b.STRING_EVENT_DATA][b.STRING_EVENT_DIM_INFO][b.STRING_DIMENSION_VALUES_DATA][f.dimOrder],prev_selected.css("z-index",0),cur_selected.css("z-index",1),x.html(a),cur_selected.removeClass(c),cur_selected.addClass("selectedSwatch"),prev_selected.removeClass("selectedSwatch"))};f.dimOrder=d[b.STRING_DIM_ORDER];f.dimName=d[b.STRING_DIM_NAME];
f.dimensionsMap=d[b.STRING_DIMENSIONS_MAP];f.dimNameDisplayString=d[b.STRING_DIMENSION_DISPLAY_STRING];f.dimValuesDisplayData=d[b.STRING_DIMENSION_VALUES_DATA];f.twisterControllerHandle=d[b.STRING_TWISTER_CONTROLLER_HANDLE];f.initialTwisterState=d[b.STRING_TWISTER_INITIAL_STATE_KEY];f.expandedViewEnabled=a[b.EXPANDED_VIEW_ENABLED];f.minAsinsForExpandedView=a[b.MIN_ASINS_FOR_EXPANDED_VIEW];f.minAsinsForExpandedScroll=a[b.MIN_ASINS_FOR_EXPANDED_SCROLL];f.dimSubType=d.dimensionDisplaySubType;f.currDimCombID=
f.initialTwisterState.getCurrentDimCombID();x=l(b.ID_SELECTOR+"counter-label-"+f.dimName+" .selection");u=b.ID_SELECTOR+f.dimName+b.CHAR_UNDERSCORE;v=l(b.ID_SELECTOR+"counterSwatchSection-"+f.dimName);F=f.minAsinsForExpandedView;j=f.minAsinsForExpandedScroll;s=F-1-1;z=l(u+s);C=l(u+(s-1));B=f.dimValuesDisplayData.length;prev_selected=l(u+f.currDimCombID);cur_selected=l(u+f.currDimCombID);(function(){n.declarative(b.AUI_EVENT_FOR_COUNTER,[b.EVENT_TYPE_CLICK,b.EVENT_TYPE_MOUSEENTER,b.EVENT_TYPE_MOUSELEAVE],
function(a){if(a.type===b.EVENT_TYPE_CLICK){if(cur_selected=l(b.ID_SELECTOR+a.data.dimValueSelectedID),f.twisterControllerHandle&&f.currDimCombID!=a.data[b.STRING_DIM_VALUE_INDEX])f.twisterControllerHandle.handleClick(a.data),f.currDimCombID=a.data[b.STRING_DIM_VALUE_INDEX],prev_selected=cur_selected}else a.type===b.EVENT_TYPE_MOUSEENTER?(f.twisterControllerHandle&&f.twisterControllerHandle.handleMouseOver(a.data),a=a.data[b.STRING_DIM_VALUE_INDEX],l(u+a).css("cursor","pointer"),a!=f.currDimCombID&&
(l(u+a).css("z-index",1),k(!0,a),x.html(f.dimValuesDisplayData[a]))):a.type===b.EVENT_TYPE_MOUSELEAVE&&(f.twisterControllerHandle&&f.twisterControllerHandle.handleMouseOut(a.data,a.data[b.STRING_DIM_INDEX],a.data[b.STRING_DIM_VALUE_INDEX]),a=a.data[b.STRING_DIM_VALUE_INDEX],a!=f.currDimCombID&&(l(u+a).css("z-index",0),k(!1,a),x.html(f.dimValuesDisplayData[f.currDimCombID])))})})();(function(){f.expandedViewEnabled&&f.dimValuesDisplayData.length>=f.minAsinsForExpandedView&&(t.click(function(){q()}),
w.click(function(){i()}),r(!0))})()}});t.when("A","a-popover","twister-string-constants","twister-utils").register("twister-vodd-popover",function(n,k,b,a){return function(d){function o(a,b){t.eventListener&&t.eventListener.handlePopoverEvent&&t.eventListener.handlePopoverEvent(a,b)}function i(a){o(b.EVENT_TYPE_SHOWPOPOVER,a);var c=t.displayPosition==="bottom"?f:l;a.popover.$container.hasClass(c)||a.popover.$container.addClass(c);e(a.popover.$container)}function q(a){o(b.EVENT_TYPE_HIDEPOPOVER,a);
a.popover.$trigger.blur()}function r(a){e(a.popover.$container);o(b.EVENT_TYPE_UPDATEPOPOVERPOSITION,a)}function e(a){var b=g.get(0).getBoundingClientRect(),d,e;window.pageYOffset?(d=window.pageYOffset,e=window.pageXOffset):(document.compatMode||"")==="CSS1Compat"?(d=document.documentElement.scrollTop,e=document.documentElement.scrollLeft):(d=document.body.scrollTop,e=document.body.scrollLeft);d=t.displayPosition==="bottom"?b.bottom+d:b.top+d-a.height();var f=b.right-b.left,b=b.left+e;a&&a.css({top:d+
"px",left:b+"px",width:f+"px"})}var f="vodd-modified-popover",l="vodd-modified-top-popover",m,h=n.$,g,t={name:null,trigger:null,eventListener:null,displayPosition:"bottom",positionOnTwisterContainer:!0};this.getHandle=function(){return m};d&&h.extend(t,d);if(!t.name)throw"Popover name should not be null";if(!t.trigger)throw"Popover trigger should not be null";(function(){var b="triggerBottom";t.displayPosition==="top"&&(b="triggerTop");b={closeButton:!1,closeButtonLabel:"close",position:b,name:t.name,
popoverLabel:t.name,activate:a.isTouchDevice()?"onmouseover":"onclick"};t.height&&h.extend(b,{height:t.height});m=k.create(t.trigger,b)})();(function(){n.on("a:popover:afterShow:"+t.name,i);n.on("a:popover:afterHide:"+t.name,q);n.on("a:popover:afterUpdatePosition:"+t.name,r);var a=function(){m&&m.isActive()&&e(m.$container)};n.on("a:pageUpdate",a);h(window).resize(a)})();g=t.positionOnTwisterContainer?h("#twister"):popover.trigger}})})})(function(){var t=window.AmazonUIPageJS||P,n=t.attributeErrors;
return n?n("DetailPageTwisterAssets"):t}());